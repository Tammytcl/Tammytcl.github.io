---
title: '计算机网络课堂笔记2-物理层'
date: 2024-09-25
permalink: /posts/2024/09/blog-post-11/
tags:
  - 计算机网络
  - category1
  - category2
---

我对世界都充满了恶意，但我未受惩罚。我占了很大的便宜。

---

# 第二章: 物理层

物理层主要任务是描述为确定与传输媒体对接口有关的一些特性

1. 理解物理层的功能
2. 掌握有关信道的几个基本概念
3. 掌握信道的最高码元传输速率和极限信息传输速率
4. 掌握物理层下面的传输媒体（双绞线、光纤）
5. 掌握模拟传输与数字传输（几种调制方法）
6. 掌握信道复用技术: 频分复用、时分复用和统计时分复用、 波分复用、码分复用
7. 了解同步光纤网 SONET 和同步数字系列 SDH
8. 了解几种宽带接入技术：ADSL,HFC,FTTx

# 基本概念

1. 机械特性: 指明接口器的形状和尺寸、引脚数目和排列、固定和锁定装置等
2. 电气特性: 指明在接口电缆等各条线上出现的电压范围
3. 功能特性: 指明某条线上出现的某一电平的电压意义
4. 过程特性: 指明对于不同功能的各种可能事件的出现顺序

**消息(message):** 如语音、文字、图像、视频等

**数据(data):** 运送消息的实体. 有意义的符号序列

**信号(signal):** 数据的电气或电磁表现

- 模拟信号: 代表消息的参数取值是连续的
- 数字信号: 代表消息的参数取值是离散的

数据通信系统可以划分为信源、信道和信宿三部分

- **信源**是产生和发送数据的源头
- **信宿**是接收数据的终点
- **信道**是信号的传输介质, 自信源到信宿之间传递信号的路径. 一般表示向某一个方向传送信息的媒体. 信道是一个逻辑概念, 不同于物理链路

信道上传送的信号有基带信号和宽带信号之分

- 基带信号(基本频带信号)
  - 来自信源的信号, 将数字信号1和0直接用两种不同的电压表示, 然后送到数字信道上传输
  - 包含有较多的低频成分, 甚至有直流部分
- 宽带信号
  - 来自基带的信号进行调制, 形成频分复用模拟信号送到模拟信道上传输

数据通信系统: 源系统(或发送端、发送方)、传输系统(或传输网络)和目的系统(或接受端、接收方)

源系统可以分为两个部分

- 源点(source): 源点设备产生要传输的数据. 源点又称为源站和信源
- 发送器: 通常源点产生的数字比特流要通过发送器编码之后才能在传输系统中进行传输

数据传输的方式分为**串行传输**和**并行传输**.

**串行传输**是逐比特地按序依次传输, **并行传输**是指若干比特通过多个通信信道同时传输.

串行传输适用于长距离通信, 如计算机网络. 并行传输适用于低距离通信, 常用于计算机内部, 如CPU与主存之间.

从通信的双方信息的交互方式来看, 可分为三种基本方式

- **单向通信(单工通信)**: 只能有一个方向的通信而没有反方向的交互
- **双向交替通信(半双工通信):** 通信的双方都可以发送信息, 但不能双方同时发送(也不能同时接收)
- **双向同时通信(全双工通信):** 通信双方可以同时发送和接收信息

码元(code): 在使用时间域(时域)的波形便是数字信号时, 代表不同离散值的基本波形

信息传输速率(比特率): 表示单位时间内数字通信系统传输的二进制码元数(即比特数), 单位: 比特/秒 (b/s)

码元传送速率(波特率): 单位时间内通过信道的波形数. 波特率 $B=\dfrac{1}{T}$

单位: 波特Baud(1波特为每秒传送一个码元)

码元传送速率也称为调制速率、波形速率或符号速率

数据率C(比特率): 单位时间内通过信道的数据量, 单位: bit/s

数据率C和码元的传输速率B在数值上成正比关系

$C=kB$, k为每个码元携带的比特数

每个码元携带的比特数越多, 则接收端进行调解时要正确识别每一种状态越困难, 所以是有上限的

# 信道的极限容量

任何信道都不是理想的, 都不可能以任意高的速率进行传送

码元的传输速率越高, 或信号传输距离越远, 或噪声干扰越大, 或传输媒体质量越差, 在接收端的波形失真越严重

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image.png" width="80%" alt="">
</div>

限制码元在信道上的传输速率的因素有以下两个

## 带宽:

### 奈奎斯特准则

在理想条件下

$$
码元传输的最高速率=2W(码元/秒)
$$

在带宽为W(Hz)的低通信道中, 若不考虑噪声影响, 则码元传输的最高速率为2W(波特, 码元/秒)

说明在任何信道中, 码元传输的速率是有上限的, 否则会出现码间串扰的问题, 使接受端怼码元的判决(识别)称为不可能

## 信噪比

信噪比是信号的平均功率和噪声的平均功率之比. 常记做 S/N, 但是大家一般以分贝(dB)作为度量单位, 即:

$$
信噪比(dB) = 10\log_{10}(S/N)(dB)
$$

### 香农定理

香农给出了带宽受限且高斯噪音干扰的信道极限数据传输速率, 当用该速率传输数据时, 不会产生误差

$$
信道的极限数据传输速率 = W\log_2(1+S/N)   
$$

W 为信道的频率带宽(单位 HZ ), S为信道内所传输信号的平均功率, N为信道内的高斯噪音功率.

结论:

1. 信道的带宽或信道中的信噪比越大, 信息的极限传输速率越高
2. 对一定的传输带宽和一定的信噪比, 信息传输速率的上限是确定的
3. 只要信息传输速率低于信道的极限传输速率, 就能找到某种方法实现无差错的传输
4. 香农定理得出的是极限信息的传输速率, 实际信道的传输速率要低不少

# 编码和调制

将数据转化为模拟信号转化为模拟信号的过程称为**调制**, 将数据转化为数字信号的过程称为**编码**

调制: 信号波形的变换

- 基带调制: 仅对基带信号的波形进行变换, 把数字信号转化为另一种形式的数字信号. 把这种过程称为编码(coding)
- 带通调制: 使用载波(carrier)进行调制, 把基带信号的频率范围移到较高的频段, 并转换为模拟信号. 经过载波调制后的信号称为带通信号

**数字信号的数字编码(基带调制)**

1. **非归零(NRZ)编码**

   优点: 简单易实现

   缺点: 难以实现收发之间的准确同步; 连续数据易形成直流成分

   和归零编码的区别就是一个时钟都传输数据, 编码效率最高, 但NRZ编码的收发双方存在同步问题, 因此需要带有时钟线.

2. **归零(RZ)编码**

   正脉冲表示1, 负脉冲表示0, 每个码元的中间均跳变到零电平. 归零要占用一部分带宽, 所以传输速率受到影响

3. **反向非归零(NRZI)编码**

   电平的跳变表示0, 电平保持不变表示1, 跳变信号本身可以作为一种通知信息.

4. **曼切斯特(Manchester)编码**

   每个码元的中间都发送电平跳变, 电平跳变既作为时钟信号(用于同步), 有作为数据信号. 可用向下跳变表示1, 向上跳表示0, 或者相反的规定

   优点: 每位中间有跳变, 自含时钟, 易实现收发之间的准确同步, 不含直流成分

   缺点: 技术复杂

5. **差分曼切斯特编码**

   每个码元的中间都发生跳变, 与曼切斯特编码不同, 电平的跳变仅表示时钟信号, 不表示数据, 数据的表示在于每个码元开始处是否有电平跳变. 无跳变表示1, 有跳变表示0. 差分曼切斯特编码有更强的抗干扰能力


标准以太网使用的是曼切斯特编码, 而宽带高速网使用的是差分曼切斯特编码

### 模拟数据编码为数字信号

包括三个步骤: 采样、量化和编码

## 调频手段

**调幅(AM):** 即载波的振幅随基带数字信号而变化

**调频(FM):** 即载波的频率随基带数字信号而变化

**调相(PM):** 即载波的初始相位随基带数字信号而变化

**正交调制 QAM(Quadrature Amplitude Modulation)**: 在频率相同的情况下, 将AM和PM结合起来, 形成叠加信号, 设波特率为B, 采样m个相位, 每个相位有n种振幅, 则QAM的数据传输速率R为

$$
R = B\log_2(mn)
$$

多相调制: 同时改变相位、振幅或频率中的两个参数, 可形成多种波形, 携带多位信息, 提高数据率

# 物理层的传输媒体

传输媒体也称为传输介质或传输媒介, 他就是数据传输系统在传输系统中在发送器和接收器之间的物理通路

## 导引型

### **1、双绞线**

最常用的导引型传输媒体

把两根互相绝缘的铜导线并排放在一起，然后用规则的方法绞合 (twist) 起来就构成了双绞线。绞合度越高，可用的数据传输率越高。

**屏蔽双绞线 STP(Shielded Twisted Pair)** ：无屏蔽层，价格便宜

**无屏蔽双绞线 UTP(Unshielded Twisted Pair)** ：有屏蔽层，需接地线

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%201.png" width="80%" alt="">
</div>


<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%202.png" width="80%" alt="">
</div>


**双绞线标准: EIA/TIA-568标准**

**两端相同, 一端568A, 一端568B, 正好发送和接收的几个线换了一下
568B(直通线)一端计算机一端交换机或路由器**

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%203.png" width="80%" alt="">
</div>
### **2、同轴电缆**

由**内导体铜质芯线**（单股实心线或多股绞合线）、**绝缘层**、网状编织的**外导体屏蔽层**（也可以是单股的）以及**保护塑料外层**所组成。

主要用于有线电视、较高速率数据传输

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%204.png" width="80%" alt="">
</div>
### 3、光纤

光纤是利用光导纤维传输光脉进行通信, 有光脉冲表示1, 无光脉冲表示0, 可见光的频率范围约为$10^8MHz$, 因此光纤通信的带宽极大

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%205.png" width="80%" alt="">
</div>
<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%206.png" width="80%" alt="">
</div>
光纤主要由纤芯和包层构成, 纤芯很细, 直径大概为8~100$\mu m$, 包层较纤芯有较低的折射率, 光波通过纤芯进行传导. 当光线从高折射率介质射向低折射率介质时, 其折射角大于入射角, 会发生全反射, 即光线碰到包层就会折射回纤芯, 这个过程不断重复, 光也就会传输下去

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%207.png" width="80%" alt="">
</div>

利用光的全反射特性, 让不同角度入射的光线在一根光纤中传输, 这个光纤称为**多模光纤**. 多模光纤的光脉冲在多模光纤中传输时逐渐展宽, 会造成失真

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%208.png" width="80%" alt="">
</div>
将纤芯直径减小到只有一个光的波长（几个微米），可使光线一直向前传播，而不会产生多次反射。这样的光纤就叫做**单模光纤**. 单模光纤的纤芯很细, 直径只有几微米, 制造成本高

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%209.png" width="80%" alt="">
</div>
**光纤的优点：**

1. 通信容量非常大
2. 传输损耗小，中继距离长，对远距离传输特别经济。
3. 抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为     重要。
4. 无串音干扰，保密性好，也不易被窃听或截取数据。
5. 体积小，重量轻。

**缺点：**

1. 成本较高。

## 非导引型

非导引性主要就是无线通信这块的内容

微波频率范围：300 MHz~300 GHz（波长1 m ~ 1 mm）。

主要使用：2 ~ 40 GHz。

**微波接力通讯**

微波接力：中继站把前一站送来的信号放大后再发送到下一站。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2010.png" width="80%" alt="">
</div>
在空间主要是直线传播。

地球表面：传播距离受到限制，一般只有 50 km左右。100 m 高的天线塔：传播距离可增大到 100 km。

主要特点：

1. 微波波段频率很高，频段范围很宽，其通信信道的容量很大。
2. 工业干扰和天电干扰对微波通信的危害小，微波传输质量较高。
3. 与相同容量和长度的电缆载波通信比较，微波接力通信建设投资少，见效快，易于实施。

主要缺点：

1. 相邻站之间须直视（常称为视距 LOS (Line Of Sight)，不能有障碍物，存在多径效应。）
2. 有时会受到恶劣气候的影响。
3. 与电缆通信系统比较，微波通信的隐蔽性和保密性较差。
4. 对大量中继站的使用和维护耗费较多的人力和物力。

**卫星通信**

1. 通信容量大，通信距离远，通信比较稳定，通信费用与通信距离无关。
2. 但传播时延较大：在 250~300 ms之间。(地面的话都是微秒级别的)
3. 请注意：“卫星信道的传播时延较大”并不等于“用卫星信道传送数据的时延较大”。
4. 保密性相对较差。
5. 造价较高。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2011.png" width="80%" alt="">
</div>
## 传输媒体的性能指标

- 成本
- 已安装性
- 容量(带宽)
- 抗干扰性
- 抗衰减性(最大传输距离)

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2012.png" width="80%" alt="">
</div>
# 信道复用技术

复用(multiplexing): 允许用户使用一个共享信道进行通信

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2013.png" width="80%" alt="">
</div>

## 频分复用(FDM)
<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2014.png" width="80%" alt="">
</div>
将信道的可用频带分为若干子频带, 相邻子频带之间留有临界保护频带, 将不同用户的信号分别调制到这些子频带上, 信道上同时传输多路信号, 所有用户在同样的时间占用不同的带宽资源。频分复用适用于模拟传输。

让 N 个用户各使用一个频带，或让更多的用户轮流使用这 N 个频带。这种方式称为频分多址接入 FDMA (Frequency Division Multiple Access)，简称为频分多址。

## 时分复用(TDM)

将信道的可用时间分为若干时隙, 将这些时隙平分给不同用户的信号, 每路信号交替占用信道资源, 所有用户在不同的时间占用同样的频带宽度, TDM 信号也称为等时 (isochronous) 信号, 时分复用适用于数字传输。

让 N 个用户各使用一个时隙，或让更多的用户轮流使用这 N 个时隙。这种方式称为时分多址接入 TDMA (Time Division Multiple Access)，简称为时分多址。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2015.png" width="80%" alt="">
</div>
时分复用会导致信道利用率不高
每路信号数据量不均衡，平均分配时隙的时分复用不灵活。可能会造成线路资源的浪费。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2016.png" width="80%" alt="">
</div>
## 波分复用 WDM

波分多路复用WDM，是指在一根光纤上使用不同的波长同时传送多路光波信号。实际上WDM是FDM的一个变种，光的频分复用用于光纤信道。

波分多路复用的工作原理：要传输的光波的波长（频率）是不同的，它们通过复用器（通常是棱镜或光栅）耦合到光缆线路上的同一根光纤中进行传输，到达目的地结点后，再经过分用器（棱镜或光栅）分成多束光波。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2017.png" width="80%" alt="">
</div>
## 码分复用CDM

考试必考

用于无线传输

码分多址(Code Division Mutiple Access)

向量规格化内积

$S(s_1,s_2,\dots,s_t,\dots,s_n)$ 和向量 $T(t_1,t_2,\dots,t_t,\dots,t_n)$, 其规格化内积为 $S\cdot T = \dfrac{1}{n}\sum_{i=1}^ns_it_i$

两个向量 S 和 T 正交(orthogonal) ，即 S 和 T 的规格化内积为 0.

每个站被指派一个唯一的 m bit的码片序列

如果发送比特 1, 则发送自己的 m bit的码片序列

如果发送比特 0, 则发送自己的的码片序列的二进制反码

例如，S 站的 8 bit 码片序列是 00011011。

发送比特 1 时，就发送序列 00011011，

发送比特 0 时，就发送序列 11100100。

用 -1 表示 0，S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1)

每个站分配的码片序列必须各不相同，且互相正交。

任何一个码片向量和该码片向量自己的规格化内积都是1.

一个码片向量和该码片反码的向量的规格化内积值是 –1.

满足分配率, 设 S, T 分别表示两个站点的码片向量, U 表示这两个站点发送的叠加信号，即：U = S + T, 则：

对于任意站点的码片向量V，V · U = V · S + V · T

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2018.png" width="80%" alt="">
</div>
# 数字传输系统

## 脉码调制PCM体制

脉码调制PCM(Pulse Code Modulation)体制最初是为了在电话局之间的中继线上传送多路的电话

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2019.png" width="80%" alt="">
</div>
## 同步光纤网 SONET

1988年，美国首先推出一个数字传输网络：同步光纤网SONET (Synchronous Optical Network)

- 各级网络的时钟都来自一个非常精确的主时钟。
- 定义了同步传输的线路等级，以 51.84 Mb/s为基础。

对电信号称为第 1 级同步传送信号 STS-1 (Synchronous Transport Signal)的传输速率是 51.84 Mb/s。
光信号则称为第 1 级光载波 OC-1，OC 表示Optical Carrier。

## 同步数字系列 SDH

ITU-T（国际电信联盟远程通信标准化组织） 以美国标准 SONET 为基础，制订出国际标准同步数字系列 SDH (Synchronous Digital Hierarchy)。一般认为 SDH 与 SONET 是同义词。

SDH 的基本速率为 155.52 Mb/s，称为第 1 级同步传递模块 (Synchronous Transfer Module)，即 STM-1，相当于 SONET 体系中的 OC-3 速率。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2020.png" width="80%" alt="">
</div>

## 宽带接入技术

1. 有线宽带接入
2. 无线宽带接入

用户连接互联网，必须先连接到某个ISP以便得到所需的地址；

互联网发展初期，用户利用电话线通过调制解调器连接到ISP，上网速度为56kb/s；

美国联邦通信委员会 FCC 定义：宽带下行速率达 25 Mbit/s，宽带上行速率达 3 Mbit/s；

## xDSL技术

xDSL 技术就是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。

标准模拟电话信号的频带被限制在 300~3400 Hz 的范围内，但用户线本身实际可通过的信号频率仍然超过 1 MHz。

xDSL 技术就把 0~4 kHz 低端频谱留给传统电话使用，而把原来没有被利用的高端频谱留给用户上网使用。

DSL 就是数字用户线(Digital Subscriber Line)的缩写。而 DSL 的前缀 x 则表示在数字用户线上实现的不同宽带方案。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2021.png" width="80%" alt="">
</div>

ADSL (Asymmetric Digital Subscriber Line)：非对称数字用户线

HDSL (High speed DSL)：高速数字用户线

VDSL (Very high speed DSL)：甚高速数字用户线

RADSL (Rate-Adaptive DSL)：速率自适应  DSL，是 ADSL 的一个子集，可自动调节线路速率）。

### ADSL的组成

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2022.png" width="80%" alt="">
</div>

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2023.png" width="80%" alt="">
</div>

第二代的ADSL的改进地方主要是

- 通过提高调制效率得到了更高的数据率。例如，ADSL2 要求至少应支持下行 8 Mb/s、上行 800 kb/s的速率。而 ADSL2+ 则将频谱范围从 1.1 MHz 扩展至2.2 MHz，下行速率可达 16 Mb/s（最大传输速率可达25 Mb/s），而上行速率可达 800 kb/s。
- 采用了无缝速率自适应技术 SRA (Seamless Rate Adaptation)，可在运营中不中断通信和不产生误码的情况下，自适应地调整数据率。
- 改善了线路质量评测和故障定位功能，这对提高网络的运行维护水平具有非常重要的意义。

### **ADSL 的特点**

- 上行和下行带宽做成不对称的。

  上行指从用户到 ISP，而下行指从 ISP 到用户。
  我国目前采用的方案是离散多音调 DMT (Discrete Multi-Tone)调制技术。这里的“多音调”是指“多载波”或“多子信道”之意。

- DMT 调制技术采用频分复用 FDM 方法。

  ADSL 在用户线（铜线）的两端各安装一个 ADSL 调制解调器，相当于在一对用户线上使用许多小的调制解调器并行地传送数据。
  ADSL 不能保证固定的数据率。

  ADSL 的极限传输距离与数据率以及用户线的线径都有很大的关系（用户线越细，信号传输时的衰减就越大），而所能得到的最高数据传输速率与实际的用户线上的信噪比密切相关。
  例如，0.5 毫米线径的用户线，传输速率为 1.5 ~ 2.0 Mb/s 时可传送 5.5 公里，但当传输速率提高到 6.1 Mb/s 时，传输距离就缩短为 3.7 公里。如果把用户线的线径减小到0.4毫米，那么在6.1 Mb/s的传输速率下就只能传送2.7公里。


## DMT技术

DMT 调制技术采用频分复用的方法，把 40 kHz 以上一直到 1.1 MHz 的高端频谱划分为许多的子信道，其中 25 个子信道用于上行信道，而 249 个子信道用于下行信道。

每个子信道占据 4 kHz 带宽（严格讲是 4.3125 kHz），并使用不同的载波（即不同的音调）进行数字调制，相当于在一对用户线上使用许多小的调制解调器并行地传送数据。

# 光纤同轴混合网 HFC(Hybrid Fiber Coax)

HFC 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。

HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。

原有的 CATV 网是树形拓扑结构的同轴电缆网络，而 HFC 网则需要对 CATV 网进行改造。

改造：把原有线电视网中的同轴电缆主干部分改换为光纤。

## HFC主要特点

HFC网的主干线路采用光纤

HFC 网将原 CATV 网中的同轴电缆主干部分改换为光纤。

光纤从头端连接到光纤结点(fiber node)，在光纤结点光信号被转换为电信号。

在光纤结点以下是同轴电缆。

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2024.png" width="80%" alt="">
</div>

我国的HFC频带划分

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2025.png" width="80%" alt="">
</div>

# FTTx 技术

FTTx（光纤到……）也是一种实现宽带居民接入网的方案。这里字母 x 可代表不同含义。

- 光纤到户 FTTH (Fiber To The Home)
- 光纤到大楼 FTTB (Fiber To The Building)
- 光纤到路边 FTTC (Fiber To The Curb)
- 光纤到小区 FTTZ (Fiber To The Zone)
- 光纤到办公室 FTTO (Fiber To The Office)
- 光纤到桌面 FTTD (Fiber To The Desk)

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2026.png" width="80%" alt="">
</div>

<div style="text-align: center;">
    <img src="/images/2024-09-25-2/image%2027.png" width="80%" alt="">
</div>
