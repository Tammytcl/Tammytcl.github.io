---
title: '高数笔记-多元函数'
date: 2024-11-04
permalink: /posts/2024/11/blog-post-23/
tags:
  - 高等数学
  - category1
  - category2
---

致那位在巴塞罗那守护我的天使，愿音乐拨动她的心弦。维托尔德。

---

# 多元函数

## 多元函数的引入
多元函数的引入这一块内容我认为同济的高等数学讲的并不好，从单变量函数到多元函数其实我们得把每一条性质都重新过一遍，这是我们连接单变量微积分学和多变量微积分学重要的桥梁，并不能是直接默认学生已经理解了的。

多元函数顾名思义就是多个变量的函数，我们生活常见的应用相关的问题也大多是多元函数的问题。我们在介绍一元函数的时候，我们一开始是通过映射去定义函数的，二元函数是两个变量在一定范围内变化时，相应的数组对应平面上某一点集合。那么同理我们可以知道三元函数的实质就是三维空间中某个点集合到实数 $ \textbf{\textit{r}}z4的一个映射。

我们用数学语言来给出定义：
我们将全体实数组 $ (x,y) $  所组成的集合记作 $ \textbf{\textit{r}}^{2} $  即

$$\textbf{textit{r}}^{2}= \left\{(x,y)|x\in \textbf{\textit{r}}, y\in \textbf{R}\right\}$$

同理全体实数组 $ (x,y,z) $  所组成的集合记作 $ \textbf{\textit{r}}^{3} $  即 $ \textbf{\textit{r}}^{3}= \left\{(x,y,z)|x\in \textbf{\textit{r}}, y\in\textbf{\textit{r}},z\in\textbf{R}\right\} $ 

对于更一般的  $ \textit{n} $  元函数，我们构建  $ \textit{n} $  个有次序的实数组： $ (x_{1},x_{2},\cdots,x_{n}) $ ，构成 $ \textbf{\textit{r} $  }^{n} $ 
即 $ \textbf{\textit{r}}^{n}= \left\{(x_{1},x_{2},\cdots,x_{n})|x_{j}\in\textbf{\textit{r}},j=1,2,\dots,n\right\} $ 

下面我们给出多元函数的正式定义：
### 定义
设有一个集合 $ D\subset \textbf{\textit{r} $  }^{n} $ ，如果对于集合 $  $\textit{D}$ $  中每一点 $ (x_{1},x_{2},\cdots,x_{n}) $ ，按照一定的规则 $ \textit{f} $  ，都有一个唯一确定的实数 $ u\in \textbf{\textit{r}} $  与之相对应，则称 $ \textit{f} $  是一个定义在  $\textit{D}$ 上的 $ \textit{n} $ 元函数，这里的 $\textit{D}$ 称为 $ \textit{f} $ 的定义域，与 $ (x_{1},x_{2},\cdots,x_{n}) $ 相对应的数 $ \textit{u} $ 被称为 $ \textit{f} $  在点 $ (x_{1},x_{2},\cdots,x_{n}) $  的值，并记为 $ f(x_{1},x_{2},\cdots,x_{n}) $ ，全体函数值的集合。

$$f(D)=\left\{f(x_{1},x_{2},\cdots,x_{n})|(x_{1},x_{2},\cdots,x_{n})\in D\right\}$$

我们在此谈论的 $ \textit{n} $ 元函数其实是 $ \textbf{\textit{r}}^{n} $ 到 $ \textbf{\textit{r}} $  的一个映射，我们接下来再将其一般化为 $ \textbf{\textit{r}}^{n} $  到 $ \textbf{\textit{r}}^{m} $  的映射，最常见的就是极坐标中的代数方程了。

设  $\textit{D}$    为 $ \textbf{\textit{r}}^{n} $  的一个集合，又设 $ \textit{f} $  是 $ D\rightarrow\textbf{\textit{r}}^{m} $  的一个映射，那么对于 $  $\textit{D}$ $  中的每一个点 $ (x_{1},x_{2},\cdots,x_{n}) $  ，在 $ \textbf{\textit{r}}^{m} $  中有唯一确定的点 $ (y_{1},y_{2},\cdots,y_{m}) $  与之相对应，这里每一个
 $ y_{j}(j=1,2,\dots m) $  都是由 $ (x_{1},x_{2},\cdots,x_{n}) $  所确定的。

故 $ y_{j} $  是 $ (x_{1},x_{2},\cdots,x_{n}) $  的一个函数，设它为 $ f_{j}(x_{1},x_{2},\cdots,x_{n})(j=1,2,\dots m) $  这样映射 $ f:D\rightarrow\textbf{\textit{r}}^{m} $  相当于 $ \textit{m} $  个  $ \textit{n} $  元函数

$$
\begin{equation*}
\left\{
\begin{array}{lr}
y_{1}=f_{1}(x_{1},x_{2},\cdots,x_{n})&\\
\cdots\cdots\cdots\cdots&\\
y_{m}=f_{m}(x_{1},x_{2},\cdots,x_{n})&\\
\end{array}
\right.
\end{equation*}
$$

因此， $ \textbf{\textit{r}}^{n} $  中的集合到 $ \textbf{\textit{r}}^{m} $  的一个映射可以用有序的 $ \textit{m} $  个  $ \textit{n} $  元函数表示，其中第 $ \textit{j} $  个  $ \textit{n} $  元函数 $ f_{j} $  称作映射的第 $ \textit{j} $  个分量。


在介绍函数的极限的时候我们引入了邻域的概念，这里我们研究多元函数的时候也需要邻域的概念。

在一维直线的情况下，我们定义的邻域是某点周围的一个很小的区间，如果在二维平面上，我们定义的邻域应该是某个点周围的很小的区间，也就是以该点为圆心的一个圆。

在数轴 $ \textbf{\textit{r}} $  上点 $ x $  到 $ x_{0} $  的距离为：
 $ \mid x-x_{0}\mid  = \sqrt{(x-x_{0})^{2}} $ 

在平面 $ \textbf{\textit{r}}^{2} $  中点 $ P(x,y) $  到点 $ P(x_{0},y_{0}) $  的距离为
 $ \sqrt{(x-x_{0})^{2} + (y-y_{0})^{2}} $ 

在三维空间 $ \textbf{\textit{r}}^{3} $  中点 $ P(x,y,z) $  到点 $ P(x_{0},y_{0},z_{0}) $  的距离为 $ \sqrt{(x-x_{0})^{2} + (y-y_{0})^{2}+ (z-z_{0})^{2}} $ 

很自然的我们将 $ \textbf{\textit{r}}^{n} $  中的点 $ P(x_{1},x_{2},\cdots,x_{n}) $  到 $ P_{0}(x_{0},x_{0},\cdots,x_{0}) $  的距离为 $ \sqrt{\sum\limits_{j=1}^{n} (x_{j}-x_{0})^{2}} $ 

### 总结
若将 $ \textbf{\textit{r}}^{n} $  中的两点 $ \textit{P,Q} $  之间的距离记作 $ d(P,Q) $ ，那么它满足下列条件：

- $ d(P,Q)\ge 0 $ 当且仅当 $ P=Q $ 时等号成立
- $ d(P,Q) =d(Q,P)\quad \forall P,Q\in \textbf{\textit{r}}^{n} $ 
- $ d(P,Q)\le d(P,R) + d(R,Q)\quad\forall P,Q,R\in\textbf{\textit{r}}^{n} $ 
=

### 定义
设 $ P_{0}\in\textbf{\textit{r}}^{n} $  为给定的一点， $ \textit{r} $ 是给定的正数，我们定义 $ P_{0} $  点的  $ \textit{r} $ 邻域是集合

$$U_{r}(P_{0}) = \left\{P\in \textbf{\textit{r}}^{n}|d(P_{0},P)<r\right\}$$

当 $ n=1 $  时，一点 $ P_{0}\in\textbf{\textit{r}} $  的  $ \textit{r} $ 邻域是以该点为中心、 $ \textit{r} $ 为半径的开区间。当 $ n=2 $  时，一点 $ P_{0}\in\textbf{\textit{r}}^{2} $  的  $ \textit{r} $ 邻域是以该点为中心、 $ \textit{r} $ 为半径的圆的内部（不包含边界点），通常称之为开圆。当 $ n=3 $  时，一点 $ P_{0}\in\textbf{\textit{r}}^{3} $  的  $ \textit{r} $ 邻域是以该点为中心、 $ \textit{r} $ 为半径的球的内部（不包含球面），通常称之为开球。

在一元函数的微积分中，我们遇到的函数大多定义在一个区间上，它是数轴上的一段，但在多元函数中函数的定义域将会更加复杂，我们将介绍区域的概念来代替过去的开区间。

设 $ E\subset \textbf{\textit{r}}^{n} $  是一个给定的集合，根据集合 $  $ \textit{E} $ $  我们将
 $ \textbf{\textit{r}}^{n} $  中的点分为三类： $  $ \textit{E} $ $ 的内点、外点和边界点。

一点 $ P\in\textbf{\textit{r}}^{n} $  称为 $  $ \textit{E} $ $  的内点，如果存在一个正数 $ \textit{r} $  使得 $ P $ 点的\ $ \textit{r} $  邻域整个包含于 $ \textit{E} $ 
$$U_{r}(P)\subset E$$

一点 $ P\in\textbf{\textit{r}}^{n} $ 称为 $ \textit{E} $ 的外点，如果存在一个正数r使得 $ P $ 点的\ $ \textit{r} $  邻域与 $ \textit{E} $ 不相交
$$U_{r}(P)\cap E = \varnothing $$

既非内点又非外点的点称为 $ \textit{E} $ 的边界点一点 $ P\in\textbf{\textit{r}}^{n} $ 称为 $ \textit{E} $ 的边界点，如果存在一个正数r使得 $ P $ 点的\ $ \textit{r} $  邻域中既有 $ \textit{E} $ 的点又有非 $ \textit{E} $ 的点。

我们用 $ \partial E $ 表示集合 $ \textit{E} $ 中全体边界点的集合。

一个集合 $ \textit{E} $ 称为开集，如果它的每一点都是内点。如平面不带边的任意一个矩形内部，不带边的任意一个圆的内部都是 $ \textbf{\textit{r}}^{2} $ 中的开集。 $ \textit{E} $ 是开集的充要条件是 $ \textit{E} $ 中没有边界点。

一个集合 $ \textit{E} $ 称为闭集，如果它包含着它的全部边界点。

开集和闭集是两种比较极端的情况，一般情况下的集合介于这两者之间：包含边界点但是不包含全部。

设 $ \textit{E} $ 是 $ \textbf{\textit{r}}^{n} $ 的一个开集，如果 $ \textit{E} $ 中任意两点都可以用一条落在 $ \textit{E} $ 中的曲线相连接，则我们说 $ \textit{E} $ 是连通的。

 $ \textbf{\textit{r}}^{n} $ 中的连同的非空开集称为 $ \textbf{\textit{r}}^{n} $ 的区域，区域是开区间的推广。

如果存在一个正数 $ \rho $ ，使得 $ \textit{E} $ 包含于以原点为心，以 $ \rho $ 为半径的球内，则我们称集合 $ E\subset\textbf{\textit{r}}^{n} $ 称为有界集合。如果找不到这样的 $ \rho $ ，则称为无界集合。

有了邻域的概念，我们给出二元函数极限的定义

### 定义1
设函数 $ z=f(x,y) $ 在点 $ (x_{0},y_{0}) $ 的某个空心邻域内有定义，若有一常数\textit{A}，对任意给定的正数 $ \epsilon $ ,都有正数 $ \delta $ 使得当

$$
\begin{align}
0<\sqrt{(x-x_{0})^{2} + (y-y_{0})^{2}}<\delta
\end{align}
$$

时，就有 $ \mid f(x,y)-A\mid <\epsilon $ 则称 $ (x,y) $ 趋于 $ (x_{0},y_{0}) $ 时， $ f(x,y) $ 以\textit{A}为极限，

$$\lim\limits_{(x,y)\rightarrow(x_{0},y_{0})}f(x,y)=A$$

这里点 $ (x_{0},y_{0}) $ 的空心邻域时它的邻域挖去 $ (x_{0},y_{0}) $ 之后形成的点集合。

记给定点 $ (x_{0},y_{0}) $ 为 $ P_{0} $ ,而动点 $ (x,y) $ 记为 $ P $ ，那么对于任意的 $ \epsilon>0 $ ， $ f(P) $ 落在\textit{A}的 $ \epsilon $ 邻域内

$$f(U_{\delta}(P_{0}) \backslash \{P_{0}\}
)\subset U_{\epsilon}(A)$$

$$
\begin{align*}
\mid x-x_{0}\mid <\epsilon,\quad\mid y-y_{0}\mid <\epsilon,\mbox{且}(x,y)\ne (x_{0},y_{0})
\end{align*}
$$

这个式子和欧氏距离的定义是等价的。

### 定义2
设函数 $ f(x,y) $ 在 $ (x_{0},y_{0}) $ 的一个空心邻域内有定义，若存在一个常数\textit{A}，对于任意的 $ \epsilon>0 $ ，都存在一个 $ \delta>0 $ ，使得当

$$
\begin{align*}
\mid x-x_{0}\mid <\epsilon,\quad\mid y-y_{0}\mid <\epsilon,\mbox{且}(x,y)\ne (x_{0},y_{0})
\end{align*}
$$

时，便有

$$\mid f(x,y)-A\mid <\epsilon$$

则称函数 $ f(x,y) $ 当 $ (x,y)\rightarrow(x_{0},y_{0}) $ 时以\textit{A}为极限

























## 多元函数的性质
### 连续的定义
设函数 $ u=f(x,y) $ 在点 $ (x_{0},y_{0}) $ 的一个邻域内有定义，若函数 $ u=f(x,y) $ 当 $ (x,y)\rightarrow(x_{0},y_{0}) $ 时有极限，且其极限等于函数值 $ f(x_{0},y_{0}) $ 也即

$$
\begin{align}
\lim\limits_{(x,y)\rightarrow(x_{0},y_{0})}f(x,y)=f(x_{0},y_{0})
\end{align}
$$
则称函数 $ f(x,y) $ 在一点 $ (x_{0},y_{0}) $ 点连续。

我们也可以说，如果函数 $ u=f(x,y) $ 在区域 $\textit{D}$ 内有定义且在内每一点都连续，则称数 $ u=f(x,y) $ 在区域 $\textit{D}$ 内连续。

### 有界性定义
设函数 $ f(P) $ 在有界闭区间 $ \bar{D} $ 上连续，则 $ f(P) $ 在 $ \bar{D} $ 上有界，即存在常数 $ \textbf{\textit{M}}>0 $ ，使

$$\mid f(P)\mid \leq \textbf{\textit{M}}\quad \forall P\in\bar{D}$$

### 最大值最小值定理
设函数 $ f(P) $ 在有界闭区间 $ \bar{D} $ 上连续，则 $ f(P) $ 在 $ \bar{D} $ 上取到最大值最小值，即存在点 $ P_{1},P_{2}\in \bar{D} $ ，使

$$f(P)\leq f(P_{1}), \quad f(P_{2})\leq f(P)\quad \forall P\in\bar{D}$$

### 介值定理
设函数 $ f(P) $ 在有界闭区间 $ \bar{D} $ 上连续，并假定\textbf{\textit{M}}与\textbf{\textit{m}}分别是 $ f(P) $ 在 $ \bar{D} $ 的最大值和最小值，则对于任意的 $ \eta:\quad \textbf{\textit{m}}\leq \eta\leq\textbf{\textit{M}} $ ，一定有一点
 $ P_{0}\in\bar{D} $ 使得 $ f(P_{0})=\eta $ 


# 多元函数的微积分学
我们将最大值最小值定理，有界连续等概念从单变量函数推广至不受变量数量的限制，我们最后来研究多变量函数的可导性，从而进入多元函数的微积分学。

但是我个人认为多元函数的导数还是要抓住几何特征，从三维空间上给出直观的物理意义，然后在延申到更高维度的抽象概念上。



## 偏导数
我们回顾之前研究函数导数是用来研究函数变化率的工具，那么我们这里针对多元函数的变化率，我们也引入导数的概念。

多元函数的自变量不止一个，在考虑多元函数的增加量时，我们研究的其实是函数沿着某一方向的增加率，既然是一个确定方向，那么我们可以知道是固定其他自变量，让其中的一个自变量变化，研究在该方向上的变化率。按照这个思路，那么我们研究的偏导数其实就是沿着这个方向曲面的一条切线。

<div style="text-align: center;">
    <img src="/images/2024-11-04/11.png" width="80%" alt="">
</div>

通过图像我们能明白固定其他变量的意义，那么我们引出偏导数的定义

### 偏导数定义
设函数 $ z=f(x,y) $ 在点 $ (x_{0},y_{0}) $ 的某一个邻域内有定义，当 $\textit{y}$ 固定在 $ y_{0} $ ，而\textit{x}在 $ x_{0} $ 处有增量 $ \Delta x $ 时，相应的函数有增量

$$
\begin{align*}
f(x_{0}+\Delta x,y_{0})-f(x_{0},y_{0})
\end{align*}
$$

如果

$$
\begin{align*}
\lim\limits_{\Delta x\rightarrow0}\frac{f(x_{0}+\Delta x,y_{0})-f(x_{0},y_{0})}{\Delta x}
\end{align*}
$$

存在，那么称此极限为函数 $ z=f(x,y) $ 在点 $ (x_{0},y_{0}) $ 处对\textit{x}的偏导数。记作 $ \frac{\partial z}{\partial x} \bigg|_{\substack{x=x_0\\y=y_0}},\frac{\partial f}{\partial x} \bigg|_{\substack{x=x_0\\y=y_0}},z_{x}\bigg|_{\substack{x=x_0\\y=y_0}}, $ 

$ f_{x}(x_{0},y_{0}) $ 

同理，对 $\textit{y}$ 的偏导数定义为

$$
\begin{align*}
\lim\limits_{\Delta y\rightarrow0}\frac{f(x_{0},y_{0}+\Delta y)-f(x_{0},y_{0})}{\Delta y}
\end{align*}
$$

记作 $ \frac{\partial z}{\partial y} \bigg|_{\substack{x=x_0\\y=y_0}},\frac{\partial f}{\partial y} \bigg|_{\substack{x=x_0\\y=y_0}},z_{y}\bigg|_{\substack{x=x_0\\y=y_0}},f_{y}(x_{0},y_{0}) $ 


如果时二元以上的多元函数，我们在做误差分析或者多元线性回归的时候，我们针对的变量可能有几十个以至上百个，这时候我们求最优解其实就是求偏导数的一个过程，我们也是通过选取一个变量，固定其他变量来求导。偏导数实质上并不难，只需要抓住几何意义来理解即可。


## 高阶偏导数
设函数 $ z=f(x,y) $ 在区域 $\textit{\textbf{D}}$ 内有偏导数

$$\frac{\partial z}{\partial x}=f_{x}(x,y),\quad\frac{\partial z}{\partial y}=f_{y}(x,y)$$

在区域 $\textit{\textbf{D}}$ 内我们有二阶偏导数

$$\frac{\partial}{\partial x}\left(\frac{\partial z}{\partial x}\right) =\frac{\partial^{2} z}{\partial x^{2} }=f_{xx}(x,y),\quad\frac{\partial}{\partial y}\left(\frac{\partial z}{\partial y}\right) =\frac{\partial^{2} z}{\partial y^{2} }=f_{yy}(x,y)$$

$$\frac{\partial}{\partial x}\left(\frac{\partial z}{\partial y}\right) =\frac{\partial^{2} z}{\partial y\partial x }=f_{yx}(x,y),\quad\frac{\partial}{\partial y}\left(\frac{\partial z}{\partial x}\right) =\frac{\partial^{2} z}{\partial x\partial y }=f_{xy}(x,y)$$


如果函数 $ z=f(x,y) $ 在区域 $\textit{\textbf{D}}$ 内两个二阶偏导数 $ \dfrac{\partial^{2} z}{\partial x\partial y } $ 及 $ \dfrac{\partial^{2} z}{\partial y\partial x} $ 连续，那么在该区域内，这两个二阶混合偏导数必相等。

或者说\underline{高阶偏导数在偏导数连续的情况下}与求导的顺序无关。

## 全微分
在引入全微分概念之前，我们需要了解什么是全增量
### 全增量定义
设函数 $ z=f(x,y) $ 在点 $ (x,y) $ 的某邻域内有定义，如果函数在点 $ (x,y) $ 的全增量

$$
\begin{align*}
\Delta z&=f(x+\Delta x,y+\Delta y)-f(x,y)\\
&=[f(x+\Delta x,y+\Delta y)-f(x,y+\Delta y)]+[f(x,y+\Delta y)-f(x,y)]
\end{align*}
$$

第一个括号可以看成关于 $\textit{x}$ 的一元函数 $ f(x,y+\Delta y) $ 的增量，根据拉格朗日中值定理

$$
\begin{align*}
f(x+\Delta x,y+\Delta y)-f(x,y+\Delta y)=f_{x}(x,y)\Delta x +\epsilon_{1}\Delta x
\end{align*}
$$

 $ \epsilon_{1} $ 为 $ \Delta x $ 与 $ \Delta y $ 的函数，且当 $ \Delta x\rightarrow0 $ 且 $ \Delta y\rightarrow0 $ 时 $ \epsilon_{1}\rightarrow0 $ 
同理第二个括号可以写为

$$
\begin{align*}
f(x,y+\Delta y)-f(x,y)=f_{y}(x,y)\Delta y +\epsilon_{2}\Delta y
\end{align*}
$$

原式可以写成

$$
\begin{align*}
\Delta z&=f_{x}(x,y)\Delta x+f_{y}(x,y)\Delta y+\epsilon_{1}\Delta x+\epsilon_{2}\Delta y\\
&=A\Delta x+B\Delta y
\end{align*}
$$

其中 $\textit{A}$ 与 $\textit{B}$ 不依赖 $ \Delta x $ 与 $ \Delta y $ ，则称函数 $ z=f(x,y) $ 在点 $ (x,y) $ 可微分，而 $ A\Delta x+B\Delta y $ 称为函数 $ z=f(x,y) $ 在点 $ (x,y) $ 的全微分，记作 $ \mathrm{d}z $ 

$$\mathrm{d}z=A\Delta x+B\Delta y$$

微分我们可以看作一个很小的变化量，但是我们先前在一元函数微积分和先前学的多元函数求偏导，我们得到的结果其实是限定变化量在坐标轴方向上的改变量，但是我们注意我们引入多元函数来描述一个曲面，我们研究曲面上的变化率应该是不限定方向的，类比如我站在一个曲面上，我往哪个方向走都不应该有限制，我们之后会引入梯度的概念，实际上梯度是我们当前所在位置往任意方向的变化率的最大值，归根结底我们还是要去将变化率的概念延伸到各个方向。所以我们有了全微分，在一元函数里面，我们的微分其实描述了一条直线，我们以直代曲来求近似，在三维曲面上，我们的微分其实可以看作一个切面，我们用切平面来代替曲面，达到近似的效果。

二元函数全微分的计算并不复杂，只需求出各变量的偏导数，如果 $ \dfrac{\partial z}{\partial x},\dfrac{\partial z}{\partial y} $ 为连续函数，代入全微分公式 $ \mathrm{d}z=\dfrac{\partial z}{\partial x}\mathrm{d}x+\dfrac{\partial z}{\partial y}\mathrm{d}y $ 

通常检验一个多元函数是否可微，先看它是否连续，如不连续，则不可微。如果连续再看偏导数是否存在，如不存在则不可微。如果在该点连续且偏导数存在，再看偏导数是否连续，如连续则可微，如不连续则可应用可微分的定义来检验。

### 可导、可微与连续

连续函数的可导条件：函数在该点的左右导数都存在切相等。

连续：函数可导必连续，连续不一定可导，不连续一定不可导。

可微（必要条件）：若函数在某点可微，则该函数在该点对x，y的偏导数必存在。

可微（充分条件）：偏导存在且连续。

一元函数中，可导必然连续，连续推不出可导，可导与可微等价。

多元函数中，可导与连续之间没有连续，可导推不出连续，连续推不出可导。多元函数在一点可偏导不能保证函数在该点连续或有极限，之所有出现这种情况是因为定义偏导数的极限

$$f_x(x_0,y_0)=\lim\limits_{\Delta\rightarrow0}\frac{f(x_0+\Delta x,y)-f(x_0,y_0)}{\Delta x}$$


仅仅是一个一元函数极限，它的存在与否只取决于函数 $ f(x,y) $ 在直线

 $$
\left\{
\begin{array}{lr}
x=x_0&\\
z=0&\\
\end{array}
\right.
 $$

上的函数值，而不涉及点 $ (x_0,y_0) $ 的邻域内其他点的函数值，相反二重极限 $ \lim\limits_{x\rightarrow0\quad y\rightarrow0}f(x,y) $ 则与函数 $ f(x,y) $ 在点 $ (x_0,y_0) $ 的某个邻域内各点的函数值都有关，由此可以看出偏导数与二重极限之间的本质区别，因此它们二者没有联系是理所当然的了。

多元函数中可微必可导，可微必连续，可导推不出可微，但若一阶偏导具有连续性则可推出可微


- 如果 $ z=f(x,y) $ ，在点 $ (x_0,y_0) $ 连续，则 $ \lim\limits_{(x,y)\rightarrow(x_{0},y_{0})}f(x,y) $ 必定存在，反之不然。
- 如果 $ z=f(x,y) $ ，在点 $ (x_0,y_0) $ 存在偏导数，并不一定保证 $ z=f(x,y) $ 在点 $ (x_0,y_0) $ 处处连续，也不一定能保证 $ z=f(x,y) $ 在 $ (x_0,y_0) $ 处可微分。
- 如果 $ z=f(x,y) $ ，在点 $ (x_0,y_0) $ 可微分，则函数 $ z=f(x,y) $ ，在点 $ (x_0,y_0) $ 必定存在偏导数，且在该点必连续。
- 如果 $ z=f(x,y) $ 存在连续偏导数，则 $ z=f(x,y) $ 在点 $ (x_0,y_0) $ 必定可微分，且 $ \mathrm{d}z=\dfrac{\partial z}{\partial x}\mathrm{d}x+\dfrac{\partial z}{\partial y}\mathrm{d}y $ 
- 如果函数 $ z=f(x,y) $ 在点 $ (x_0,y_0) $ 可微分， $ \dfrac{\partial z}{\partial x},\dfrac{\partial z}{\partial y} $ 在该点不一定连续。


## 隐函数求导
### 隐函数求导法则

我们以三元函数 $ F(x,y,z) $ 为例，设函数 $ F(x,y,z) $ 在点 $ P(x_{0},y_{0},z_{0}) $ 的某一邻域内具有连续偏导数，且 $ F(x_{0},y_{0},z_{0})=0,F_{z}(x_{0},y_{0},z_{0})\neq0 $ ，则方程 $ F(x,y,z)=0 $ 在点 $ P(x_{0},y_{0},z_{0}) $ 的某一邻域内恒能唯一确定一个连续且具有连续偏导数的函数 $ z=f(x,y) $ ，它满足数 $ z_{0}=f(x_{0},y_{0}) $ ，并有

$$
\frac{\partial z}{\partial x}=-\frac{F_{x}}{F_{z}},\quad
\frac{\partial z}{\partial y}=-\frac{F_{y}}{F_{z}}
$$


隐函数求导我们推广到更多变量，更多方程组个数的情形。

$$
\left\{
\begin{array}{lr}
F(x,y,z,u,v)=0\\G(x,y,z,u,v)=0
\end{array}
\right.
$$

对于这种复杂情况我们给出更聪明的求法
### 隐函数存在定理
设 $ F(x,y,z,u,v) $ 、 $ G(x,y,z,u,v) $ 在点 $ P(x_{0},y_{0},z_{0},u_{0},v_{0}) $ 的某一邻域内具有对各个变量的连续偏导数，又设 $ F(x_{0},y_{0},z_{0},u_{0},v_{0}) $ 、 $ G(x_{0},y_{0},z_{0},u_{0},v_{0}) $ 且偏导数组成的雅可比行列式。

$$
\begin{align}
J&=\frac{\partial (F,G)}{\partial (u,v)}\\&=
\begin{vmatrix}
\frac{\partial F}{\partial u}&\frac{\partial F}{\partial v}\\	\frac{\partial G}{\partial u}&\frac{\partial G}{\partial v}
\end{vmatrix}
\end{align}
$$

在点 $ P(x_{0},y_{0},z_{0},u_{0},v_{0}) $ 不等于零，则 $ F(x_{0},y_{0},z_{0},u_{0},v_{0})=0 $ 、 $ G(x_{0},y_{0},z_{0},u_{0},v_{0})=0 $ 在点 $ (x_{0},y_{0},z_{0},u_{0},v_{0}) $ 的某一邻域内能唯一确定一组连续且具有连续偏导数的函数 $ u=u(x,y),v(x,y) $ ，它们满足 $ u_{0}=u(x_{0},y_{0}),v_{0}(x_{0},y_{0}) $ ,并有

$$
\begin{align}
\frac{\partial u}{\partial x}=-\frac{1}{J}\frac{\partial (F,G)}{\partial (x,v)}
=-\frac{
\begin{vmatrix}
F_{x} & F_{v}\\
G_{x} & G_{v}
\end{vmatrix}}
{
\begin{vmatrix}
F_{u} & F_{v}\\
G_{u} & G_{v}
\end{vmatrix}}
\end{align}
$$

$$
\begin{align}
\frac{\partial v}{\partial x}=-\frac{1}{J}\frac{\partial (F,G)}{\partial (u,x)}
=-\frac{
\begin{vmatrix}
F_{u} & F_{x}\\
G_{u} & G_{x}
\end{vmatrix}}
{
\begin{vmatrix}
F_{u} & F_{v}\\
G_{u} & G_{v}
\end{vmatrix}}
\end{align}
$$

$$
\begin{align}
\frac{\partial u}{\partial y}=-\frac{1}{J}\frac{\partial (F,G)}{\partial (y,v)}
=-\frac{
\begin{vmatrix}
F_{y} & F_{v}\\
G_{y} & G_{v}
\end{vmatrix}}
{
\begin{vmatrix}
F_{u} & F_{v}\\
G_{u} & G_{v}
\end{vmatrix}}
\end{align}
$$

$$
\begin{align}
\frac{\partial v}{\partial y}=-\frac{1}{J}\frac{\partial (F,G)}{\partial (u,y)}
=-\frac{
\begin{vmatrix}
F_{u} & F_{y}\\
G_{u} & G_{y}
\end{vmatrix}}
{
\begin{vmatrix}
F_{u} & F_{v}\\
G_{u} & G_{v}
\end{vmatrix}}
\end{align}
$$



# 方向导数和梯度
我们之前讲过了，我们需要把变化率这个概念拓展到任意方向，我们之前已经引入了全微分这个概念，在这里我们正式介绍梯度这个概念。

在人工智能算法中，梯度下降是一个很基础很重要的算法，其本质思想就是在每一步都检查周围梯度或者斜率，然后选择梯度下降最快的方向，每一步都是如上的重复，直到到达最小值（或者局部极小值）。

我们先来研究一下方向导数
## 方向导数
### 方向导数的定义
函数的增量 $ f(x+\Delta x,y+\Delta y)-f(x,y) $ ，前后两点之间的距离 $ \rho=\sqrt{(\Delta x)^{2}+(\Delta y)^{2}} $ 

$$\frac{\partial f}{\partial l}=\lim\limits_{\rho\rightarrow 0^{+}}\frac{f(x+\Delta x,y+\Delta y)-f(x,y)}{\rho}$$

我们利用全微分的表达式， $ \Delta z=f_{x}(x,y)\Delta x+f_{y}(x,y)\Delta y $ 

我们观察几何图形可以得到 $ \cos\phi =\dfrac{\Delta x}{\rho},\cos\psi =\dfrac{\Delta y}{\rho} $ 

<div style="text-align: center;">
    <img src="/images/2024-11-04/14.png" width="80%" alt="">
</div>


根据这些式子我们可以得到

$$\frac{\partial f}{\partial l}\big|_{(x_{0},y_{0})}=f_{x}(x_{0},y_{0})\cos\phi +f_{y}(x_{0},y_{0})\cos\psi $$

其中 $ \cos \phi $ 和 $ \cos \psi $  是方向 $\textbf{\textit{l}}$ 的方向余弦

偏导数反映的是函数沿坐标轴方向的变化率，而方向导数反映的是函数在 $ P_0 $ 点沿任意方向的变化率。

## 梯度
梯度这个概念我觉得很酷，因为它有一个算子（哈哈哈） $ \bigtriangledown=\dfrac{\partial}{\partial x}\textbf{\textit{i}}+ \dfrac{\partial}{\partial y}\textbf{\textit{j}} $ （更高维度也是类似就不列举了）

设体系中某处的物理参数(如温度、速度、浓度等)为 $\textit{w}$，在与其垂直距离的 d$ $\textit{y}$ $ 处该参数为 $\textit{w}+d\textit{w}$，则称为该物理参数的梯度，也即该物理参数的变化率。如果参数为速度、浓度、温度或空间，则分别称为速度梯度、浓度梯度、温度梯度或空间梯度。

在向量微积分中，标量场的梯度是一个向量场。标量场中某一点上的梯度指向标量场增长最快的方向，梯度的长度是这个最大的变化率。更严格的说，从欧几里得空间 $ R_{n} $ 到\ $ \textit{r} $  的函数的梯度是在 $ R_{n} $ 某一点最佳的线性近似。

梯度是我接触向量场或者场论费劲的第一个概念，之后还有旋度散度，场论可能是向量与函数结合的另一个高度，梯度是我们来分析下降趋势的一个辅助工具。

$$\textbf{grad}f(x_{0},y_{0})=\bigtriangledown f(x_{0},y_{0})=f_{x}(x_{0},y_{0})\textbf{\textit{i}}+f_{y}(x_{0},y_{0})\textbf{\textit{j}}$$

我们将梯度和方向导数联系在一起

$$
\begin{align}
\frac{\partial f}{\partial l}\big|_{(x_{0},y_{0})}&=f_{x}(x_{0},y_{0})\cos\alpha +f_{y}(x_{0},y_{0})\cos\beta \\
&=\textbf{grad}f(x_{0},y_{0})\textbf{ $ \textit{E} $ }=\mid \textbf{grad}f(x_{0},y_{0})\mid  \cos\theta
\end{align}
$$

梯度是一个向量，方向导数是数量，梯度方向是函数最大方向的导数方向，梯度的模是最大方向导数之值。


# 多元函数极值
我们多元函数求极值在高中的时候是利用拉格朗日乘值法来做的，但是但是我们对多元函数的认识还没有那么深刻，对于一些问题还是一知半解的。

首先我们先定义什么是多元函数的极值
## 多元函数极值定义
设函数 $ z=f(x,y) $ 的定义域为 $\textit{D}$ ， $ P_{0}(x_{0},y_{0}) $ 为 $\textit{D}$ 的内点，若存在 $ P_{0} $ 的某一个邻域 $ U(p_{0})\subset D $ ，使得对于该邻域内异于 $ P_{0} $ 的任何点 $ (x,y) $ ，都有

$$f(x,y)<f(x_{0},y_{0})$$

则称函数 $ f(x,y) $ 在点 $ (x_{0},y_{0}) $ 有极大值 $ f(x_{0},y_{0}) $ 

若存在 $ P_{0} $ 的某一个邻域 $ U(p_{0})\subset D $ ，使得对于该邻域内异于 $ P_{0} $ 的任何点 $ (x,y) $ ，都有

$$f(x,y)>f(x_{0},y_{0})$$

则称函数 $ f(x,y) $ 在点 $ (x_{0},y_{0}) $ 有极小值 $ f(x_{0},y_{0}) $ 

极大值和极小值统称为极值，使得函数取得极值的点称为极值点。

我们明确了对于多元函数极值的概念，接下来我们来简单说一说两种多元函数极值的求法。
## 一般情况
设函数 $ z=f(x,y) $ 在点 $ (x_{0},y_{0}) $ 的某邻域内连续且有一阶及二阶连续偏导数，又 $ f_{x}(x_{0},y_{0})=0,f_{y}(x_{0},y_{0})=0 $ 令

$$f_{xx}(x_{0},y_{0})=A,\quad f_{yy}(x_{0},y_{0})=C,\quad
f_{xy}(x_{0},y_{0})=B$$

则 $ f(x,y) $ 在点 $ (x_{0},y_{0}) $ 处的极值求解我们根据以下判断

- $ AC-B^{2}>0 $ 时具有极值， $ A>0 $ 具有极小值， $ A<0 $ 具有极大值
- $ AC-B^{2}<0 $ 时无极值点
- $ AC-B^{2}=0 $ 时另作判断


## 条件极值
条件极值在生活中和数学建模中应用比较多，但是求解方式比较固定以及计算复杂，我可能更希望从几何角度来理解这么做的道理

<div style="text-align: center;">
    <img src="/images/2024-11-04/15.png" width="80%" alt="">
</div>

我们假设山峰的高度时 $ f(x,y) $ ，其中一条曲线 $ g(x,y)=C $ 是图示红色的固定曲线，我们要求该曲线上的最低点，那么我们从几何角度上来看是求一条直线，使得直线和曲线的交点只有一个，我们利用之前曲线和直线的法向量概念，如果我们交点不唯一，那么两者的法向量不平行。反之我们只需要分别求法向量，利用平行这个概念就能找到这个最低点的切线。

法向量平行：

$$\bigtriangledown f(x,y)=-\lambda\bigtriangledown g(x,y)$$

经过整理，我们可以得到拉格朗日乘数法的计算公式。

$$\bigtriangledown f(x,y)+\lambda\bigtriangledown g(x,y)=0$$

我们设函数 $ L(x,y)=f(x,y)+\lambda g(x,y) $ 

$$
\left\{
\begin{array}{lr}
f_{x}(x_{0},y_{0})+\lambda g_{x}(x_{0},y_{0})=0\\
f_{y}(x_{0},y_{0})+\lambda g_{y}(x_{0},y_{0})=0\\
g(x_{0},y_{0})=0
\end{array}
\right.
$$
 $ L(x,y) $ 称为拉格朗日函数，参数 $ \lambda $ 称为拉格朗日乘子。




# 多元函数积分
## 二重积分
我们回顾一元积分的引入，我们是先通过切割，然后求和，最后取极限的方式来计算不规则图像和坐标轴围成的面积，在介绍多元积分的时候我们也采用类似方式。

我们超哥讲三维立体图形的切割命名为“切薯条”，这个比喻生动形象，值得我给它配一张图。

<div style="text-align: center;">
    <img src="/images/2024-11-04/17.png" width="80%" alt="">
</div>

### 定义
设 $ z=f(x,y) $ 是定义在有界闭区域 $\textit{D}$ 上的函数，若对 $\textit{D}$ 的任意分割{ $ D_{1},D_{2},\cdots, D_{n}, $ }及任意选择的 $ (x_{i},y_{i})\in D_{i}(i=1,2,\cdots ,n) $ ， $ \lambda $ 表示 $ D_{i} $ 中直径的最大者，当 $ \lambda\rightarrow0 $ 时，黎曼和 $ \underset{i=1}{\overset{n}{\sum}}f(x_{i},y_{i})\Delta\sigma_{i} $ 总有极限

$$\iint\limits_{D}f(x,y)\mathrm{d}\sigma=\iint\limits_{D}f(x,y)\mathrm{d}x\mathrm{d}y=\lim\limits_{\lambda\rightarrow0}\sum_{i=1}^{n}f(x_{i},y_{i})\Delta\sigma_{i}$$

我们可以得到 $ \iint_{D}d\sigma=S $ 
我们求和之所以利用 $ \lambda $ 而不是 $ \textit{n} $ 是因为，如果我们先切一块很大的，再将接下来的体积无限切割，那么我们也可以得到 $ n\rightarrow\infty $ 但是这种切割方法并不是特别仔细，极限不能很好近似于面积。

在通过无穷分割来引入二重积分之后，我们可以试着研究一下二重积分的性质。

首先二重积分和一重一样都是可以拆开和提取常数的

$$
\begin{align*}
\iint\limits_{D}kf(x,y)\mathrm{d}\sigma&=k\iint\limits_{D}f(x,y)\mathrm{d}\sigma\\
\iint\limits_{D}[f(x,y)+g(x,y)]\mathrm{d}\sigma&=\iint\limits_{D}f(x,y)\mathrm{d}\sigma+\iint\limits_{D}g(x,y)\mathrm{d}\sigma\\
\iint\limits_{D}f(x,y)\mathrm{d}\sigma&=\iint\limits_{D_{1}}f(x,y)\mathrm{d}\sigma+\iint\limits_{D_{2}}f(x,y)\mathrm{d}\sigma
\end{align*}
$$

我们在一重积分的研究中也研究过不等式和绝对值符号在积分中的情况

$$
\begin{align*}
f(x,y)\leq g(x,y),&\quad \forall(x,y)\in D\\
\iint\limits_{D}f(x,y)\mathrm{d}\sigma &\leq	\iint\limits_{D}g(x,y)\mathrm{d}\sigma\\
\mid 	\iint\limits_{D}f(x,y)\mathrm{d}\sigma\mid &\leq \iint\limits_{D}\mid f(x,y)\mid \mathrm{d}\sigma
\end{align*}
$$

另外还有一个很重要的概念，就是中值定理在二重积分中的体现：

若函数 $ f(x,y) $ 在有界闭区域 $\textit{D}$ 上连续，则在 $\textit{D}$ 上至少存在一点 $ (x_{0},y_{0}) $ 使得

$$
\begin{align*}
\iint\limits_{D}f(x,y)\mathrm{d}\sigma=f(x_{0},y_{0})\cdot S
\end{align*}
$$

其中 $\textit{S}$  为区域 $\textit{D}$ 的面积

我们做一个对比, 在单变量微积分中我们有牛顿莱布尼兹公式

$$F(b)-F(a)=\int_{a}^{b}f(x)\mathrm{d}x$$

我们思考等式左边是数值的减法，这个 $\textit{F}$ 的几何意义并不是特别明显，但是右边的积分就是函数与坐标轴之间围成的面积，这两侧的实际意义并不相同，只不过是数值上相同罢了。

在多重积分的计算过程中，我们一般是通过累次积分的方式计算。比如说

$$\iint\limits_{D}f(x,y)\mathrm{d}\sigma=\int_{a}^{b}\mathrm{d}x\int_{\varphi_{1}(x)}^{\varphi_{2}(x)}f(x,y)\mathrm{d}y$$

等式左边我们做的是二重积分，我们得到的是一个立体图形的体积，而等式右边，我们按照从右往左的顺序对\textit{x}和 $\textit{y}$ 进行分别积分，其实我们对比之前的参数方程，这里和参数方程类似，都是先找两个变量之间的关系（这里是 $\textit{x,} $\textit{y}$ $）最后回归到单变量的面积积分。同样，我们只能说两侧的数值计算恰好相等，但是我们不能说他们的意义相同。

关于二重积分的计算，我不打算多涉及，说到底就是用累次积分不停算。
但是对于二重积分的运算，我们首先应该从定义域出发，如果可以的话我们先把积分区域画出来，之后将二重积分转化为累次积分，累次积分我们一般把简单的积分放在最后。

在二重积分的计算中，为了方便我们的运算，我们需要引入极坐标的概念（虽然应该在高中-大学的衔接中学到，但是真正应用最多的场景应该还是在二重积分中）

## 极坐标

我们在学习极坐标之前回顾一下笛卡尔坐标系。

坐标系的本质是描述一个点相对原点的位置关系，但是如果我们能够很清晰描述这个位置的话，其实选用什么坐标系都大差不差。在直角坐标系中，我们可以通过水平和竖直两个方向来确定一个点的绝对坐标。我们再思考一下坐标系一定是要直角坐标系吗？答案是否定的，通过引入线性代数中的向量运算，我们其实可以构建各种各样的斜坐标系，只要最后通过坐标变换矩阵既可以还原至直角坐标系，进而进行运算，对于斜坐标系的应用场景我们在此不多提及，但是我们要打破内心的桎梏，直角坐标系只是正交向量来描述点的坐标，并没有特别神圣的地位，对于其他形式的坐标系，我们不应该感到困惑和害怕。

我们开始正式介绍极坐标。
极坐标其实你可以想象成一个能够伸缩的棍子，他在从零长度开始不停历遍区域内的所有点，在它扫描的过程中，棍子摇摆的角度我们通过角度加以限制。极坐标的核心思想莫过如此。

我们用数学语言来构建极坐标系

<div style="text-align: center;">
    <img src="/images/2024-11-04/16.png" width="80%" alt="">
</div>

由于我们是从直角坐标系过渡到极坐标系，我们转换坐标。

$$
\left\{
\begin{array}{lr}
x=r\cos\theta\\
y=r\sin\theta
\end{array}
\right.
$$

这个转换我们在高中学习三角函数的时候涉及到，我们这里利用“臂长” $ \rho $ 和角度 $ \theta $ 来描述该点的坐标。

由于我们是直接表示点到原点的距离的，那么我们在解决 $ x^{2}+y^{2} $ 的问题的时候就方便很多了。
我们要注意的一点是 $ \theta\in [0,2\pi) $ 



<div style="text-align: center;">
    <img src="/images/2024-11-04/18.png" width="80%" alt="">
</div>


我们记每一小块的面积为 $ \Delta A_{i} $ 
我们可以通过求和得到面积

$$S_{n}=\sum_{k=1}^{n}f(r_{k},\theta_{k})\Delta A_{k}$$

我们是通过把角度和径长分割，对于这种分割我们可以令 $ \textit{n} $ 趋于无穷。

$$\lim\limits_{n\rightarrow \infty}S_{n}=\iint\limits_{R}f(r,\theta)\mathrm{d}A$$

我们再详细解释一下 $ \Delta A $ 的划分，对于固定的 $ \Delta \theta $ 的情况下，我们面积的增加量，可以通过面积相减得到

$$
\begin{align*}
\Delta A&=\frac{1}{2}(r_{k}+\frac{\Delta r}{2})^{2}\Delta \theta - \frac{1}{2}(r_{k}-\frac{\Delta r}{2})^{2}\Delta \theta\\
&=\frac{\Delta \theta}{2}(2r_{k}\Delta r)=r_{k}\Delta r\Delta \theta
\end{align*}
$$


<div style="text-align: center;">
    <img src="/images/2024-11-04/19.png" width="80%" alt="">
</div>

我们将推导出来的 $ \Delta A $ 代入积分中，可以得到

$$
\begin{align*}
\lim\limits_{n\rightarrow \infty}S_{n}=\iint\limits_{R}f(r,\theta)r\mathrm{d}r\mathrm{d}\theta
\end{align*}
$$

我们再按照我们一般处理二重积分的方法，我们将二重积分转化为累次积分进行计算

$$
\begin{align*}
\iint\limits_{R}f(r,\theta)\mathrm{d}A=\int_{\theta=\alpha}^{\theta=\beta}\mathrm{d}\theta\int_{r=g_{1}(\theta)}^{r=g_{2}(\theta)}f(r,\theta)r\mathrm{d}r
\end{align*}
$$

到此为止我们介绍了极坐标的概念和极坐标在二重积分中的应用。

极坐标我们对于角度和径长先选取哪个做积分取决于积分区域的形状，建议先画图再考虑极坐标替换。

是时候进入三重积分的大门了！
## 三重积分
三重积分的引入我们应该先结合物理意义，在二重积分的时候我们计算的就已经是立体物体的体积了，那么三重积分我们如果单纯的站在数学角度考虑，我们得到的结果是上升到四维了。我们跳出数学我们站在物理角度看待这个问题，在生活实际问题的解决中，一个物体的体积可能会不均匀，我们引入三重积分的第三个维度是关于坐标的一个密度分布。

我们明确了三重积分的物理含义，我们进入三重积分的定义

### 定义
设 $ f(x,y,z) $ 是空间有界闭区域 $ \Omega $ 上的有界函数，将 $ \Omega $ 任意分成 $ \textit{n} $ 个小闭区域 $ \Delta v_{1},\Delta v_{2},\cdots $ 其中 $ \Delta v_{i} $ 表示第\textit{i}个小闭区域，也表示它的体积，在每个 $ \Delta v_{i} $ 上任取一点 $ (\xi_{i},\eta_{i},\zeta_{i} ) $ ，作乘积 $ f(\xi_(i),\eta_{i},\zeta_{i} )\Delta v_{i} $ 并求和，设各小闭区域直径最大值 $ \lambda\rightarrow 0 $ 时，这和的极限总存在，且与闭区间分割方式以及点 $ (\xi_(i),\eta_{i},\zeta_{i} ) $ 的取法无关，那么称此极限为函数 $ f(x,y,z) $ 在闭区间 $ \Omega $ 上的三重积分，记作 $ \iiint\limits_{\Omega}f(x,y,z)\mathrm{d}v $ 

$$\iiint\limits_{\Omega}f(x,y,z)\mathrm{d}v=\lim\limits_{\lambda\rightarrow 0}\sum_{i=0}^{n}f(\xi_(i),\eta_{i},\zeta_{i} )\Delta v_{i}$$

在直角坐标系中，小闭区域 $ \Delta v_{i} $ 的边长为 $ \Delta x_{j},\Delta y_{k},\Delta z_{l} $ ，则 $ \Delta v_{i}=\Delta x_{j}\Delta y_{k}\Delta z_{l} $ ，据此，三重积分我们能化为直角坐标系的常见形式

$$\iiint\limits_{\Omega}f(x,y,z)\mathrm{d}x\mathrm{d}y\mathrm{d}z$$

三维空间下的积分，我们要先观察被积函数，如果被积函数是一个单变量函数，比如只有\textit{x}或者只有 $\textit{y}$ 或者只有\textit{z}，那么我们其实就可以把被积函数看成沿一个方向上的密度分布函数。我们只需要算出沿该变量方向上横截面的面积，先做面积积分，再沿变量方向累计，这个就是先重积分再单变量积分的方法。

如果我们针对的是比较规则的物体，我们可以选定一个方向（如\textit{xOy}），做截面，然后想办法求得该面积大小与\textit{z}的关系式，再对\textit{z}积分即可。

在三维空间中，除了最基本的直角坐标系，我们还能利用角度来表示某个点的坐标，这就是柱坐标系和球坐标系。


## 柱坐标系
<div style="text-align: center;">
    <img src="/images/2024-11-04/20.png" width="80%" alt="">
</div>

我们这个其实就是极坐标与\textit{z}轴的拼接。

$$
\left\{
\begin{array}{lr}
x=r\cos\theta\\
y=r\sin\theta\\
z=z
\end{array}
\right.
$$

$$
\begin{align*}
0\leq r&<+\infty\\
0\leq \theta&\leq 2\pi\\
-\infty<z&<+\infty
\end{align*}
$$

<div style="text-align: center;">
    <img src="/images/2024-11-04/21.png" width="80%" alt="">
</div>
通过这个图我们可以看出，对于柱坐标系，我们的体积微元 $ \mathrm{d} v=r\mathrm{d}r\mathrm{d}\theta \mathrm{d}z $ 

$$\iiint\limits_{\Omega}f(x,y,z)\mathrm{d}v=\iiint\limits_{\Omega}F(\rho,\theta,z)r\mathrm{d}r\mathrm{d}\theta \mathrm{d}z$$

我们简单的看一下柱坐标系，一般来说，这个 $ \theta $  的积分比较方便，通常只需要一直积分到2 $ \pi $ 即可,所以我们选择把角度放在最外面积分。


## 球坐标系
<div style="text-align: center;">
    <img src="/images/2024-11-04/22.png" width="80%" alt="">
</div>

$$
\left\{
\begin{array}{lr}
x=\rho\cos\theta\sin\phi\\
y=\rho\sin\theta\sin\phi\\
z=\rho\cos\phi
\end{array}
\right.
$$

$$
\begin{align*}
0\leq \rho&<+\infty\\
0\leq \theta&\leq 2\pi\\
0\leq\phi&\leq\pi
\end{align*}
$$

<div style="text-align: center;">
    <img src="/images/2024-11-04/23.png" width="80%" alt="">
</div>

对于球坐标系下，我们的微元 $ \mathrm{d} v=r^{2}\sin\phi\mathrm{d}r\mathrm{d}\theta \mathrm{d}\phi $ 

$$\iiint\limits_{\Omega}f(x,y,z)\mathrm{d}v=\iiint\limits_{\Omega}F(\rho,\phi,\theta)r^{2}\sin\phi\mathrm{d}r\mathrm{d}\theta \mathrm{d}\phi$$


# 重积分的应用
重积分的应用主要分为曲面面积的求解、质心位置的求解、转动惯量的求解以及引力的计算，后面三者都是基于一定物理背景，我们在此着重讲述曲面面积的计算。这部分内容后之后我们的曲面积分有千丝万缕的联系。

曲面的面积计算的核心思想也是“以直代曲”，我们用一个切平面去拟合曲面的一小部分，通过极限的思想来实现面积的近似相等。
所以问题转化为了如何寻找平面和曲面之间的数量关系。

我们需要先明确的两个式子是：

$$\iint_{D}1\Delta \mathrm{d}\sigma = \lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}\Delta \sigma_{i}=\mbox{平面区域 $\textit{D}$ 的面积}$$

$$\iiint_{\omega}1\mathrm{d}V=\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}\Delta V_{i}=\mbox{空间区域Ω的体积}$$

设空间曲面 $\textit{S}$  的方程为

$$z=f(x,y),\qquad (x,y)\in D$$

它在\textit{Oxy}平面上的投影为闭区域 $\textit{D}$ ，又设函数 $ f(x,y) $ 在 $\textit{D}$ 上有连续的一阶偏导数。

为了求得曲面 $\textit{S}$  的面积，我们考虑曲面上任意一点 $ P(x,y,z) $ ，并考虑增量 d\textit{x}>0 及 d $\textit{y}$ >0，记 $ \Delta \sigma=\mathrm{d}x\mathrm{d}y $ 
并记 $ \Delta S $ 为对应于这两个增量曲面上微元的面积

<div style="text-align: center;">
    <img src="/images/2024-11-04/24.png" width="80%" alt="">
</div>

过 $\textit{P}$ 点作 $\textit{S}$  的切平面，对应微元 $ \Delta \sigma $ 切平面的微元的面积我们记作 $ \Delta S' $ ，我们有

$$\Delta \sigma = \mid \cos\gamma\mid \Delta S'$$

其中 $ \gamma $ 是曲面 $\textit{S}$  在\textit{P}点的法向量 $\textbf{ $ \textit{n} $ }$ 与 $\textit{z}$ 轴的夹角

我们可以表示在\textit{P}点的法向量 $ n=((f_{x}(x,y)),f_{y}(x,y),-1) $ ，因此

$$\mid \cos\gamma\mid =\frac{1}{\sqrt{1+f_{x}^{2}(x,y)+f_{y}^{2}(x,y)}}$$

从而，进一步得到

$$\Delta S'=\sqrt{1+f_{x}^{2}(x,y)+f_{y}^{2}(x,y)}\Delta \sigma$$

由于 $ \Delta S $ 与 $ \Delta S' $  近似相等

$$\mathrm{d} S=\sqrt{1+f_{x}^{2}(x,y)+f_{y}^{2}(x,y)}\mathrm{d}\sigma$$

$$S=\iint_{D}\sqrt{1+f_{x}^{2}(x,y)+f_{y}^{2}(x,y)}\mathrm{d}\sigma$$

至此，我们推导出了切平面和曲面面积的关系以及计算公式。







# 曲线积分
我们之前铺垫过向量函数的概念，我们这一节正式引入曲线积分。曲线积分与曲面积分是我们研究场论的很重要的一步，我们从曲线和曲面积分可以引入散度和旋度，我们可以研究流速场的分布。

## 第一类曲线积分

第一类曲线积分主要考虑的是曲线的质量、质心、转动惯量等问题。

第一类曲线积分我们还是遵循分割、近似代替、求和、取极限的方法求值。我们将曲线\textit{L}任意分割成 $ \textit{n} $ 段，设第\textit{i}段的弧长为 $ \Delta s_{i} $ ，在第\textit{i}段上任取一点 $ (\xi_{i},\eta_{i},\zeta_{i}) $  (\textit{i}=1,2, $ \cdots $ , $ \textit{n} $ )，当分割的很细时，第\textit{i}段上每点的密度都与 $ \rho(\xi_{i},\eta_{i},\zeta_{i}) $ 相差很小，因而第\textit{i}段的质量 $ \Delta m_{i} $ 近似为

$$\Delta m \approx \rho(\xi_{i},\eta_{i},\zeta_{i})\Delta s_{i}$$

我们求和得到

$$m=\sum_{i=1}^{n}\Delta m_{i}\approx \sum_{i=1}^{n} \rho(\xi_{i},\eta_{i},\zeta_{i})\Delta s_{i}$$

令 $ \lambda = \max\limits_{1\leq i \leq n}{\Delta s_{i}} $ ，若极限

$$\lim\limits_{\lambda\rightarrow0}\rho(\xi_{i},\eta_{i},\zeta_{i})\Delta s_{i}$$存在，

则我们认为此极限值就是曲线 $\textit{L}$ 的质量

$$m=\lim\limits_{\lambda\rightarrow 0}\rho(\xi_{i},\eta_{i},\zeta_{i})\Delta s_{i}$$

我们从物理角度出发，我们按照以上例子，给出第一类曲线积分的定义

### 定义
设函数 $ f(x,y,z) $ 在分段光滑的曲线段\textit{L}上有定义，我们将\textit{L}任意分成 $ \textit{n} $ 段，第\textit{i}段的弧长记作 $ \Delta s_{i}(i=1,2,\cdots,n) $ ，在第\textit{i}段上任取一点 $ (\xi_{i},\eta_{i},\zeta_{i}) $ ，令 $ \lambda = \max\limits_{1\leq i \leq n}{\Delta s_{i}} $ 

若极限 $ \lim\limits_{\lambda\rightarrow 0}\underset{i=1}{\overset{n}{\sum}}f(\xi_{i},\eta_{i},\zeta_{i})\Delta s_{i} $ ，对于曲线\textit{L}的任意分割法及中间点 $ (\xi_{i},\eta_{i},\zeta_{i}) $ 的任意取法都存在，则称此极限为函数 $ f(x,y,z) $ 沿曲线\textit{L}的第一类曲线积分，也叫做对弧长的曲线积分，记作

$$\int_{L}f(x,y,z)\mathrm{d}s$$

其中 $ f(x,y,z) $ 称为被积函数，\textit{L}称为积分曲线， $ \mathrm{d}s $ 称为弧微分

由定义我们可以看出，线密度为 $ \rho(x,y,z) $ 的曲线\textit{L}的质量\textit{m}就等于函数 $ \rho(x,y,z) $ 在\textit{L}上的第一类曲线积分的值，即

$$m=\int_{L}\rho(x,y,z)\mathrm{d}s$$

而积分

$$\int_{L}1\mathrm{d}s$$

恰好是曲线 $\textit{L}$ 的弧长 $\textit{S}$ 

注意第一类曲线积分是不考虑正负的

$$\int_{\wideparen{AB}}f(m)\mathrm{d}s=\int_{\wideparen{BA}}f(m)\mathrm{d}s$$

### 计算
我们先讨论平面上的第一类曲线积分的计算，假设\textit{L}是\textit{Oxy}，其方程由函数 $ y=y(x) (a\leq x \leq b) $ ，由设 $ f(x,y) $ 是\textit{L}上的一个连续函数，现在问题是如何计算

$$I=\int_{L}f(x,y)\mathrm{d}s$$我们这里的根据定义出发这个积分是和式 $ \underset{i=1}{\overset{m}{\sum}}f(\xi_{i},\eta_{i})\Delta s_{i} $ 的极限，我们在二维平面里， $ \eta $ 实际上是对\textit{L}的一个分割，是与\textit{x}轴坐标相关的参数，我们可以写为

$$\sum_{i=1}^{m}f(\xi_{i},\eta_{i})\Delta s_{i}=\sum_{i=1}^{m}f(\xi_{i},y(\xi_{i}))\Delta s_{i}$$

我们利用之前学的弧微分

$$\Delta s_{i}\approx \sqrt{\Delta x^{2}+[y'(\xi_{i})\Delta x]^{2}}=\sqrt{1+[y'(\xi_{i})]^{2}}\Delta x_{i} \quad (\Delta x_{i}=x_{i}-x_{i-1})$$

于是，上述和式又近似于

$$\sum_{i=1}^{m}f(\xi_{i},y(\xi_{i}))\sqrt{1+[y'(\xi_{i})]^{2}}\Delta x_{i} $$

我们的线积分

$$
\begin{align*}
I =& \lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{m}f(\xi_{i},y(\xi_{i}))\sqrt{1+[y'(\xi_{i})]^{2}}\Delta x_{i} \\
=&\int_{a}^{b}f(x,y(x))\sqrt{1+[y'(x)]^{2}}\mathrm{d}x
\end{align*}
$$

所以我们得到了公式

$$\int_{L}f(x,y)\mathrm{d}s=\int_{a}^{b}f(x,y(x))\sqrt{1+[y'(x)]^{2}}\mathrm{d}x$$

### 定理1
设曲线\textit{L}是由函数 $ y=y(x)(a\leq x\leq b) $ 所给出，其中 $ y=y(x) $ 在[a,b]上由连续的导数，又假定函数 $ f(x,y) $ 在\textit{L}上连续，则我们有公式

$$\int_{L}f(x,y)\mathrm{d}s=\int_{a}^{b}f(x,y(x))\sqrt{1+[y'(x)]^{2}}\mathrm{d}x$$

考虑到很多情况下我们的曲线方程是用参数方程形式给出的，所以我们把刚刚定义的曲线积分推广到含参数方程的曲线积分。

### 定理2
设曲线 $\textit{L}$ 的参数方程是

$$
\left\{
\begin{array}{lr}
x = \phi(t)\\
y = \psi(t)
\end{array}
\right.
$$

其中 $ \alpha \leq t \leq \beta $ ，函数 $ \phi(t) $ 与 $ \psi(t) $ 在 $ [\alpha,\beta] $ 上有连续的一阶导数，若 $ f(x,y) $ 在\textit{L}上连续，则有计算公式：

$$\int_{L}f(x,y)\mathrm{d}s=\int_{\alpha}^{\beta}f(\phi(t),\psi(t))\sqrt{[\phi'(t)]^{2}(t)+[\psi'(t)]^{2}}\mathrm{d}t$$


## 第二类曲线积分
第二类曲线积分的介绍我们也从物理角度出发，这里我们类比的是物理里面的做功。

设有一条平面光滑的曲线\textit{L}，并且给定了\textit{L}一个走向，起点为\textit{A}，终点为 $\textit{B}$ ，设有一个质点沿\textit{L}移动，它在点 $ (x,y)$$\in L $ 所受到的外力为

$$\textbf{\textit{F}}(x,y) = (\textbf{\textit{P}}(x,y),\textbf{\textit{Q}}(x,y))$$

我们要计算质点沿 $\textit{L}$ 自 $\textit{A}$ 移动至 $\textit{B}$ 时外力所做的功

我们用分点 $ A=A_{0},A_{1},\cdots ,A_{n}=B $ 将曲线 $ \wideparen{AB} $ 任意分割成 $ \textit{n} $ 段小弧

$$\wideparen{A_{i-1}A_{i}}\quad(i=1,2,\cdots,n)$$

设第i段的弧长为 $ \Delta s_{i} $ ，当 $ \Delta s_{i} $ 很小时，\textit{\textbf{F}}在 $ \wideparen{A_{i-1}A_{i}} $ 上的变化不大，可近似的看作为常力 $ \textit{\textbf{F}}(\xi_{i},\eta_{i}) $ ，其中 $ (\xi_{i},\eta_{i}) $ 为弧段 $ \wideparen{A_{i-1}A_{i}} $ 上任取的一点，同时可将指点的运动轨迹 $ \wideparen{A_{i-1}A_{i}} $ 近似的看作从 $ A_{i-1} $ 到 $ A_{i} $ 的一条直线，于是\textit{\textbf{F}}在这段上做的功 $ \Delta W_{i} $ ，近似为

$$\Delta W_{i}\approx \textit{\textbf{F}}(\xi_{i},\eta_{i}) \cdot \overrightarrow{A_{i-1}A_{i}}$$

设 $ \textit{\textbf{F}}(x,y)=P(x,y)\textbf{\textit{i}}+Q(x,y)\textit{\textbf{j}} $ 

$$\overrightarrow{A_{i-1}A_{i}}=\Delta \textbf{\textit{i}}+\Delta y_{i}\textit{\textbf{j}}$$

其中 $ \Delta x_{i}=x_{i}-x_{i-1},\Delta y_{i}=y_{i}-y_{i-1}(i=1,\cdots,n) $ 

$$
\Delta W_{i}\approx
P(\xi_{i},\eta_{i})\Delta x_{i}+Q(\xi_{i},\eta_{i})\Delta y_{i}\qquad i=1,2,\cdots,n
$$

所求总功 $\textit{W}$ 近似为

$$W=\sum_{i=1}^{n}\Delta W_{i}\approx \sum_{i=1}^{n}P(\xi_{i},\eta_{i})\Delta x_{i}+Q(\xi_{i},\eta_{i})\Delta y_{i}$$

令 $ \lambda = \max\limits_{1\leq i \leq n}{\Delta s_{i}} $ ，我们定义变力\textbf{\textit{F}}沿 $ \wideparen{AB} $ 所做的功为

$$W=\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}[P(\xi_{i},\eta_{i})\Delta x_{i}+Q(\xi_{i},\eta_{i})\Delta y_{i}]$$

据此，我们给出第二类曲线积分的定义

### 定义} 
设 $\textit{L}$ 是从 $\textit{A}$ 到 $ $\textit{B}$ $ 的一条有向分段光滑曲线，向量函数 $ \textbf{\textit{F}}(x,y) = \textbf{\textit{P}}(x,y)\textit{\textbf{i}}+\textbf{\textit{Q}}(x,y)\textit{\textbf{j}} $ 在\textit{L}上有定义，按 $\textit{L}$ 的方向顺序用分点 $ A=A_{0}(x_{0},y_{0}),A_{1}(x_{1},y_{1}),\cdots,A_{n}(x_{n},y_{n})=B $ 将\textit{L}分成 $ \textit{n} $ 个有向线段 $ \wideparen{A_{i-1}A_{i}}\quad(i=1,2,\cdots,n) $ ， $ \wideparen{A_{i-1}A_{i}} $ 的弧长记为 $ \Delta s_{i} $ ，并令 $ \lambda = \max\limits_{1\leq i \leq n}{\Delta s_{i}} $ ，在 $ \wideparen{A_{i-1}A_{i}} $ 上任取一点 $ (\xi_{i},\eta_{i}) $ ，若极限

$$\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}\textit{\textbf{F}}(\xi_{i},\eta_{i}) \cdot \overrightarrow{A_{i-1}A_{i}}=\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}[P(\xi_{i},\eta_{i})\Delta x_{i}+Q(\xi_{i},\eta_{i})\Delta y_{i}]$$

存在，其中 $ \Delta x_{i}=x_{i}-x_{i-1},\Delta y_{i}=y_{i}-y_{i-1} $ ，不依赖曲线\textit{L}的任意分割法及中间点 $ (\xi_{i},\eta_{i},\zeta_{i}) $ 的取法，则称此极限为向量值函数 $ \textbf{\textit{F}}(x,y) $ 沿曲线\textit{L}从\textit{A}到 $\textit{B}$ 的第二类曲线积分，也叫做对坐标的曲线积分，记作

$$\int_{\wideparen{AB}}P\mathrm{d}x+Q\mathrm{d}y \quad or \quad  \int_{\wideparen{AB}}\textbf{\textit{F}}(x,y)\cdot \mathrm{d}\textbf{\textit{r}}$$

其中 $ \mathrm{d}\textbf{\textit{r}}=(\mathrm{d}x,\mathrm{d}y) $ ，有向线段 $ \wideparen{AB} $ 称为积分路径

由定义看出，外力 $\textit{F}$ 沿曲线 $\textit{L}$ 从 $\textit{A}$ 到 $ $\textit{B}$ $ 所做的功可表示为第二类曲线积分

$$W=\int_{\wideparen{AB}}\textbf{\textit{F}}(x,y)\cdot \mathrm{d}\textbf{\textit{r}}$$

第二类曲线积分是要考虑正负的，设 $ L $ 是有向光滑曲线， $ L^- $ 是 $ L $ 的反向曲线弧

$$
\int_{L^-}\textbf{\textit{F}}(x,y)\cdot \mathrm{d}\textbf{\textit{r}}=-\int_{L}\textbf{\textit{F}}(x,y)\cdot \mathrm{d}\textbf{\textit{r}}
$$

### 计算
设曲线 $\textit{L}$ 的参数方程是

$$
\left\{
\begin{array}{lr}
x = \phi(t)\\
y = \psi(t)
\end{array}
\right.
$$

其中 $ \alpha \leq t \leq \beta $ ，函数 $ \phi(t) $ 与 $ \psi(t) $ 在 $ [\alpha,\beta] $ 上有连续的一阶导数，当\textit{t}单调地（递增或递减），曲线上的点从\textit{A}变到 $\textit{B}$ ，若 $ P(x,y),Q(x,y) $ 在\textit{L}上连续，则有计算公式：

$$
\begin{align*}
\int_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y=
\int_{\alpha}^{\beta}[P(\phi(t),\psi(t))\phi'(t)+Q(\phi(t),\psi(t))\psi'(t)]\mathrm{d}t
\end{align*}
$$


## 格林积分

在上节，有些平面的第二类曲线积分的值，只依赖于积分路径的起点与终点，而与积分路径的选取无关，我们这节讨论当 $ P(x,y),Q(x,y) $ 满足什么条件时，曲线积分

$$	\int_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y$$

与积分路径无关而只取决于终点起点的选取。


我们在多元函数的介绍中提及平面区域的概念，现在我们在此基础上介绍单连通域和多连通域的概念。

我们说 $\textit{L}$ 是一条简单曲线，如果它是一个映射 $ \phi:[\alpha,\beta]\rightarrow \textbf{\textit{r}}^{2} $ 的像，其中 $ \phi $ 在 $ [\alpha,\beta] $ 上连续， $ \phi $ 在 $ (\alpha,\beta) $ 上是一一映射，且 $ \phi(\alpha)=\phi(\beta) $ 

从几何上看这就意味着一条简单闭合曲线的就是起点与终点相重合，而其他处不自交的曲线，一条简单曲线把平面分割为为两个区域，一个是有界的，一个是无界的，我们把其中有界的区域称作简单闭合曲线的内部。
### 定义1
若平面区域 $\textit{D}$ 中的任意一条简单闭曲线的内部都包含于 $\textit{D}$ 之中，则称 $\textit{D}$ 为单连通区域，否则称作多联通区域。

意味着一个简单曲线所围成的区域是单连通的，而如果你在一个单连通区域内挖去一个点，或若干点，或若干个闭区域，那么所剩下的集合就不再是单连通的了。

在本节中涉及到的区域都是有界区域，由一条或几条简单闭曲线所围成。

在此基础上我们还需要确定一个闭合曲线的正向和负向边界

### 定义
设区域 $\textit{D}$ 的边界为 $\textit{L}$，$\textit{L}$是由一条或几条简单闭合曲线所组成，我们说边界曲线 $\textit{L}$ 的正向是指向这样的方向，使得沿这个方向前进时区域总落在左侧，规定了正向的边界曲线 $\textit{L}$ 记作 $ L^{+} $ 
最外层的边界曲线的方向的正向是逆时针的，内层的几条边界曲线的正向则是顺时针的
我们在定义了连通区域之后给出格林公式

### 定理1（格林公式）
设函数若 $ P(x,y),Q(x,y) $ 在有界闭区域 $\textit{D}$ 上有连续的一阶偏导数， $\textit{D}$ 的边界 $\textit{L}$ 是逐段光滑的，则有格林公式：

$$\oint_{L^{+}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y=\iint\limits_{D}(\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y})\mathrm{d}x\mathrm{d}y$$


格林公式的证明详见《高等数学教程 北大版（下册）》
不过我们首先要清楚的是，当曲线\textit{L}围成的区域是闭区域时格林公式就可以用，但是格林公式的结果是否等于0这件事要另作判断。格林公式的使用过程中我们首先规定外层逆时针是正，内层顺时针是正，我们外层减去内层。


我们接下来狠狠介绍一下平面第二型曲线积分与路径无关的条件。
如果积分结果与路径无关，第二类曲线积分

$$\oint_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y$$

的值只与起点 $\textit{A}$，终点 $\textit{B}$ 的坐标有关，而与连接 $\textit{A,B}$ 两点的积分路径无关。

### 命题
在区域 $\textit{D}$ 内任意选定两点 $\textit{A,B}$，曲线积分 $ \oint_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ 在区域 $\textit{D}$ 内与路径无关的充分必要条件是：对于 $\textit{D}$ 内任意一条简单逐段光滑的闭合曲线 $\textit{C}$，沿 $\textit{C}$ 的曲线积分为零，即
$$\oint_{C^{+}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y=0$$

<div style="text-align: center;">
    <img src="/images/2024-11-04/25.png" width="80%" alt="">
</div>

根据这张图，我们可以把闭合曲线 $\textit{C}$ 分为 $ \wideparen{AnB} $ 和 $ \wideparen{AmB} $ 

$$\oint_{\wideparen{AnB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y=\oint_{\wideparen{AmB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y$$

移项得

$$
\begin{align*}
0=&\oint_{\wideparen{AmB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y-\oint_{\wideparen{AnB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y\\
=&\oint_{\wideparen{AmB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y+\oint_{\wideparen{BnA}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y\\
=&\oint_{C^{+}}Pdx+Qdy
\end{align*}
$$

在开始介绍路径无关之前，好好品一品这个命题，说明这个闭区域的曲线积分只取决于边界条件，在闭区域内部单个的结果都是0。

### 定理2
设 $\textit{D}$ 是单连通区域，函数 $ P(x,y) $ 与 $ Q(x,y) $ 在 $\textit{D}$ 内有一阶连续偏导数，则对 $\textit{D}$ 内任意取定的两点 $\textit{A}$ 与 $\textit{B}$，曲线积分

$$\oint_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y$$

与路径无关的的充要条件是等式

$$\frac{\partial P}{\partial y} = \frac{\partial Q}{\partial x}$$在 $\textit{D}$ 内处处成立。

这里的证明我们只需要利用格林公式即可得到。

### 定理3
设函数 $ P(x,y) $ 与 $ Q(x,y) $ 在单连通区域 $\textit{D}$ 内有一阶连续偏导数，则等式

$$\frac{\partial P}{\partial y} = \frac{\partial Q}{\partial x}$$

在 $\textit{D}$ 内恒成立的充分必要条件是 $ P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ 恰是某个函数 $ u(x,y) $ 的全微分，即有$$\mathrm{d} u(x,y)=P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y$$

这个定理的证明我们回顾偏导数的那章，我们说过
如果函数 $ z=f(x,y) $ 在区域 $\textit{D}$ 内两个二阶偏导数 $ \dfrac{\partial^{2} z}{\partial x\partial y } $ 及 $ \dfrac{\partial^{2} z}{\partial y\partial x} $ 连续，那么在该区域内，这两个二阶混合偏导数必相等。
那么我们在此已知存在函数 $ z=f(x,y) $  使得 $ \mathrm{d} u(x,y)=P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ ，
于是 $ \dfrac{\partial u}{\partial x} = P $ ， $ \dfrac{\partial u}{\partial y} = Q $ ，由此可得

$$\frac{\partial P}{\partial y} = \frac{\partial^{2} u}{\partial x\partial y},\qquad \frac{\partial Q}{\partial x} = \frac{\partial^{2} u}{\partial y\partial x}$$

于是 $ \dfrac{\partial P}{\partial y}, \dfrac{\partial Q}{\partial x} $ 的连续性意味着 $ \dfrac{\partial^{2} u}{\partial x\partial y} $ 和 $ \dfrac{\partial P}{\partial y}, \dfrac{\partial Q}{\partial x} $ 的连续性意味着 $ \dfrac{\partial^{2} u}{\partial y\partial x} $ 的连续性，从而证明两个混合偏导相等。


### 推论

设函数 $ P(x,y),Q(x,y) $ 在单连通区域 $\textit{D}$ 内有连续的一阶偏导数，对任意两点 $ A,B\in D $ ，曲线积分 $ \oint_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ 与路径无关的充要条件是： $ P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ 恰是某个函数 $ u(x,y) $ 的全微分，此外，当 $ P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y $ 是 $ u(x,y) $ 的全微分时，有

$$\oint_{\wideparen{AB}}P(x,y)\mathrm{d}x+Q(x,y)\mathrm{d}y=\int_{A}^{B}\mathrm{d}u=u(B)-u(A)$$

其中 $ u(A) $ 表示 $ u(x,y) $ 在 $\textit{A}$ 点处的函数值， $ u(B) $ 类似。

得知路径无关的条件之后，我们一般可以用水平和竖直的两条路径来代替原本的曲线，因为水平竖直的 $ \mathrm{d}x $ 与 $ \mathrm{d}y $ 
不会同时存在，每次我们只需要计算单个的积分就可以。对于有些有比值或者分母的情况，我们可能需要挑选一个更好的路径来消去分母。
格林公式里面主打一个“补边”和“挖洞”，补边的话和高斯定理都差不多，使得积分区域闭合，挖洞的是对于分式积分，在积分区域情况下，分母可能包裹原点使得分母为0的情况，对于这种情况我们只需要把原点挖一个洞，利用格林公式，





# 曲面积分
## 第一类曲面积分
设在空间有一张光滑曲面 $\textit{S}$ （即在曲面上每点处都有切平面，且切平面的法向量随着曲面上的点连续的变动），其上一点 $ (x,y,z) $ 处的面密度为 $ \rho(x,y,z) $ ，函数 $ \rho(x,y,z) $ 在 $\textit{S}$  上连续。

我们用曲线网将 $\textit{S}$  分成 $ \textit{n} $ 小块 $ \Delta S_{i} $ ，在每一 $ \Delta S_{i} $ 上任取一点 $ (\xi_{i},\eta_{i},\zeta_{i}) $ ，则小块的 $ \Delta S_{i} $ 的质量 $ \Delta m $ 近似等于 $ \rho(\xi_{i},\eta_{i},\zeta_{i})\Delta S_{i} $ ，因此

$$M\approx \sum_{i=1}^{n}\rho(\xi_{i},\eta_{i},\zeta_{i})\Delta S_{i}$$

令 $ \lambda =\underset{1\leq i \leq n}{max} $ { $ \Delta S_{i} $ 的直径}，若极限

$$\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}\rho(\xi_{i},\eta_{i},\zeta_{i})\Delta S_{i}$$

存在，则可认为此极限值就是曲面 $\textit{S}$  的质量 $\textit{M}$，即

$$M\approx \lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}\rho(\xi_{i},\eta_{i},\zeta_{i})\Delta S_{i}$$

### 定义

设函数 $ f(x,y,z) $ 在分片光滑的曲面 $\textit{S}$  上有定义，我们把 $\textit{S}$  任意分成 $ \textit{n} $ 个互不重叠的小片 $ \Delta S_{i} $ ，令 $ \lambda =\underset{1\leq i \leq n}{max} $ { $ \Delta S_{i} $ 的直径}，在 $ \Delta S_{i} $ 上任取一点 $ \rho(\xi_{i},\eta_{i},\zeta_{i}) $ ，若无论曲面S怎样的分割及中间点 $ \rho(\xi_{i},\eta_{i},\zeta_{i}) $ 怎样的选取，极限

$$\lim\limits_{\lambda\rightarrow 0}\sum_{i=1}^{n}f(\xi_{i},\eta_{i},\zeta_{i})\Delta S_{i}$$

总存在，则称此极限值为函数 $ f(x,y,z) $ 在曲面 $\textit{S}$  上的第一类曲面积分，记作

$$\iint\limits_{S}f(x,y,z)\mathrm{d}S$$

其中 $\textit{S}$  称为积分曲面， $ f(x,y,z) $ 被称为被积函数。

当 $\textit{S}$  为一封闭曲面时，习惯上把 $ f(x,y,z) $ 在 $\textit{S}$  上的第一类曲面积分记作

$$\oiint\limits_{S}f(x,y,z)\mathrm{d}S$$

我们都知道，定义都是简单的，真正麻烦的是计算

设曲面 $\textit{S}$ 

$$z=g(x,y),\qquad(x,y)\in D$$

给出，且函数 $ g(x,y) $ 在区域D上连续可微，则有计算公式

$$\iint\limits_{S}f(x,y,z)\mathrm{d}S=\iint\limits_{S}f(x,y,g(x,y))\sqrt{1+g_{x}^{2}(x,y)+g_{y}^{2}(x,y)}\mathrm{d}\sigma$$

其实这就是我们把 $ \mathrm{d}S $ 用 $ \sqrt{1+g_{x}^{2}(x,y)+g_{y}^{2}(x,y)}\mathrm{d}\sigma $ 代替，以及把\textit{z}用关于\textit{x,y}的函数表示，转化为两个变量的积分。



## 第二类曲面积分
第二类曲面积分和第二类曲线积分一样是有方向性的。因此我们需要先定义曲面的正负。

在 $\textit{S}$  上考虑一个点 $\textit{P}$，在点 $\textit{P}$ 存在两个法向量，我们选取其中的一个指向记为 $ \textbf{ $ \textit{n} $ }(P) $ ，设想点\textit{P}在 $\textit{S}$  上作任意的连续移动，而其法向量也随之变化，不论\textit{P}沿怎样的路线在 $\textit{S}$  上连续移动，当\textit{P}返回起始点时， $ \textbf{ $ \textit{n} $ }(P) $ 的指向没有改变，我们把这类曲面 $\textit{S}$  称为双侧曲面，把不成立这类曲面称之为单侧曲面。

我们从该定义可知，双侧曲面上只要我们任取一点\textit{P}的法向量 $ \textbf{ $ \textit{n} $ }(P) $ ，则曲面上其他任意一点\textit{M}处的法向量 $ \textbf{ $ \textit{n} $ }(M) $ 也就确定了。

设曲面 $\textit{S}$ 

$$z=f(x,y),\qquad(x,y)\in D$$

其中 $ f(x,y) $ 是区域 $\textit{D}$ 上有一阶连续偏导数的函数，它在每一点 $ (x,y,z)\in S $ 都有两个法向量

$$(f_{x},f_{y},-1)\qquad(-f_{x},-f_{y},1)$$

我们选取法向量 $ (-f_{x},-f_{y},1) $ 为曲面的上侧， $ (f_{x},f_{y},-1) $ 为法向量的下侧。

### 定义
设 $\textit{S}$是一个分片光滑的双侧曲面，在S上选定了一侧，记选定侧的法向量为 $ \textbf{ $ \textit{n} $ }(P) $ ，假设在 $\textit{S}$  上给定了一个向量函数 $ \textbf{\textit{F}}(x,y,z) $ ，我们将 $\textit{S}$  分割成 $ \textit{n} $ 个不相重叠的小曲面片 $ \Delta S_{i} $ ，面积也记为 $ \Delta S_{i} $ ，在 $ \Delta S_{i} $ 上任取一点 $ M_{i}(\xi_{i},\eta_{i},\zeta_{i}) $ 

$$\sum_{i=1}^{n}\textbf{\textit{F}}(\xi_{i},\eta_{i},\zeta_{i})\cdot \textbf{ $ \textit{n} $ }\Delta S_{i}$$

令 $ \lambda $ 是 $ \Delta S_{i} $ 中直径的最大者，如果上述求和对 $\textit{S}$  的任意一种分割及中间点 $ (\xi_{i},\eta_{i},\zeta_{i}) $ 的任意的选取，当 $ \lambda\rightarrow 0 $ 时总有极限，那么称此极限为向量函数 $ \textbf{\textit{F}}(x,y,z) $ 在 $\textit{S}$  上的第二类曲面积分，或写成

$$\iint\limits_{S}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{ \textit{S}}\qquad\mbox{其中}\mathrm{d}\textbf{\textit{S}}=\textbf{ $ \textit{n} $ }(x,y,z)\mathrm{d}S$$

## 高斯公式
高斯公式其实在电磁学中我们就有所涉及，只不过高数引入的时候符号和定义更加完备和复杂了，我们从物理意义出发，高斯公式是计算通量的一个式子，高斯面上穿过的通量大小即为内部源点出发的所有通量。
\paragraph{定义}


设空间闭区域 $ \Omega $ 是由分片光滑的闭曲面 $ \Sigma $ 所形成，若函数 $ P(x,y,z),Q(x,y,z) $ 和 $ R(x,y,z) $ 在 $ \Omega $ 上具有一阶的连续偏导数，则有

$$\iiint\limits_{\Omega}(\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z})\mathrm{d}v=\oiint\limits_{\Sigma}P\mathrm{d}y\mathrm{d}z+Q\mathrm{d}z\mathrm{d}x+R\mathrm{d}x\mathrm{d}y$$

右侧的式子为曲面在 $ xOy,yOz,xOz $ 平面上的投影大小，用方向余弦我们可以转化为

$$\iiint\limits_{\Omega}(\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z})\mathrm{d}v=\oiint\limits_{\Sigma}(P\cos\alpha+Q\cos\beta+R\cos\gamma)\mathrm{d}S$$

这里 $ \Sigma $ 是整个 $ \Omega $ 的整一个曲面的外侧。



<div style="text-align: center;">
    <img src="/images/2024-11-04/26.png" width="80%" alt="">
</div>

我们以投影到 $ xOy $ 平面的\textit{R(x,y,z)}为例，推导高斯公式

先计算上下曲面的积分

$$
\begin{align*}
\iiint\limits_{\Omega}\frac{\partial R}{\partial z}\mathrm{d}v&=\iint\limits_{D_{xy}}{\int_{z_{1}(x,y)}^{z_{2}(x,y)}\frac{\partial R}{\partial z}\mathrm{d}z}\mathrm{d}x\mathrm{d}y\\
&=\iint\limits_{D_{xy}}{R[x,y,z_{2}(x,y)]-R[x,y,z_{2}(x,y)]}\mathrm{d}x\mathrm{d}y
\end{align*}
$$

由于侧曲面 $ \Sigma_{3} $ 上在水平面的投影是一段完整圆的圆弧，面积为0，所有这部分积分结果为0。

$$\iint\limits_{\Sigma_{3}}R(x,y,z)\mathrm{d}x\mathrm{d}y=0$$

把这两部分相加就是完整闭合曲面的积分，得到

$$\oiint\limits_{\Sigma}R(x,y,z)\mathrm{d}x\mathrm{d}y=\iint\limits_{D_{xy}}{R[x,y,z_{2}(x,y)]-R[x,y,z_{2}(x,y)]}\mathrm{d}x\mathrm{d}y$$

上式二重积分中$$R[x,y,z_{2}(x,y)]-R[x,y,z_{2}(x,y)]$$可以看作是某一个函数积分之后得到的结果，所以我们可以将这积分与二重积分叠加形成三重积分

$$\iiint\limits_{\Omega}\frac{\partial R}{\partial z}\mathrm{d}v$$

$$\iiint\limits_{\Omega}\frac{\partial R}{\partial z}\mathrm{d}v=\oiint\limits_{\Sigma}R(x,y,z)\mathrm{d}x\mathrm{d}y$$

同理

$$\iiint\limits_{\Omega}\frac{\partial P}{\partial x}\mathrm{d}v=\oiint\limits_{\Sigma}P(x,y,z)\mathrm{d}y\mathrm{d}z$$

$$\iiint\limits_{\Omega}\frac{\partial Q}{\partial y}\mathrm{d}v=\oiint\limits_{\Sigma}Q(x,y,z)\mathrm{d}x\mathrm{d}z$$


我们再定义 $ \dfrac{\partial P}{\partial x}+\dfrac{\partial Q}{\partial y}+\dfrac{\partial R}{\partial z} $ 为向量函数

$$\textbf{\textit{F}}=(P(x,y,z),Q(x,y,z),R(x,y,z))$$的散度，记作 $ div\textbf{\textit{F}} $ 

公式可以写为

$$\iint\limits_{S^+}\textbf{\textit{F}}\cdot \textbf{ $ \textit{n} $ }\mathrm{d}s=\iiint\limits_{\Omega}div\textbf{\textit{F}}\mathrm{d}V$$

物理上我们称曲面积分 $ \iint\limits_{S^+}\textbf{\textit{F}}\cdot \textbf{ $ \textit{n} $ }\mathrm{d}s $ 称为向量场 $ \textbf{\textit{F}}(x,y,z) $ 通过曲面 $\textit{S}$  的通量，高斯公式的物理意义其实就是\textbf{\textit{F}}通过曲面 $\textit{S}$  的通量等于其散度在 $\textit{S}$  所包围的区域 $ \Omega $ 上的三重积分。需要注意的是，如果是一个闭合曲面，则外表面的积分是正，内表面的是负，如果是不闭合的曲面，我们称法向量朝上的是正，法向量朝下的是负，这个符号是要单独加在积分符号前面的和后面的积分的量并没有关系。

利用高斯公式我们可以把三重积分转化为二重积分，只需要计算立体分别在\textit{xOy,yOz,xOz}面上的投影面积即可，我们在计算投影的时候要考虑到物体面的法向量和坐标轴围成的面的法向量之间的夹角是否为钝角，如果为钝角则投影结果是一个负值。

高斯定理的计算实际上考察补面比较多，大部分题目给出的三重积分区域并不是一个闭合的曲面，需要我们添加一个面使其封闭，所以我们需要在计算高斯定理之后减去补上的面，需要我们计算补的面的三重积分，这时候就要很谨慎考虑补的面的投影的正负。


# 斯托克斯公式
斯托克斯公式是格林公式的一个推广，将格林公式中的平面区域推广到空间曲面，格林公式中的区域边界推广为空间曲线，因而斯托克斯公式是联系空间曲面上的第二类曲面积分与该曲面的边界线上的第二类曲线积分之间的关系式。
### 定义

设 $\textit{S}$  为分片光滑的双侧曲面，其边线\textit{L}是一条或几条分段光滑的闭曲线，假定在 $\textit{S}$  上取定一侧的单位法向量\textbf{ $ \textit{n} $ }，规定\textit{L}的定向，使得\textit{L}的定向与\textbf{ $ \textit{n} $ }的指向构成右手系。记 $ S^+ $ 及 $ L^+ $ 分别为给定定向后的 $\textit{S}$  与\textit{L}，若 $ P(x,y,z),Q(x,y,z),R(x,y,z) $ 是 $ S+L $ 上的有一阶连续偏导数的函数，则有斯托克斯公式：

$$
\begin{align*}
\oint_{L^+}P&\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z\\
&=\iint\limits_{S^+}(\frac{\partial R}{\partial y}-\frac{\partial Q}{\partial z})\mathrm{d}y\mathrm{d}z+
(\frac{\partial P}{\partial z}-\frac{\partial R}{\partial x})\mathrm{d}z\mathrm{d}x+
(\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y})\mathrm{d}x\mathrm{d}y
\end{align*}
$$

我们只需要证明三个式子，以下取一个做例子

$$	\oint_{L^+}P\mathrm{d}x=\iint\limits_{S^+}\frac{\partial P}{\partial z}\mathrm{d}z\mathrm{d}x-\frac{\partial P}{\partial y}\mathrm{d}x\mathrm{d}y$$

<div style="text-align: center;">
    <img src="/images/2024-11-04/27.png" width="80%" alt="">
</div>

假设\textit{L}是一条闭合曲线并且曲面 $\textit{S}$  的方程为 $ z=f(x,y),\quad (x,y)\in D $ ，其中 $\textit{D}$ 为曲面 $\textit{S}$  在\textit{Oxy}平面上的投影，记 $\textit{D}$ 的边界曲线为 $\textit{C}$ ， $\textit{C}$ 也是 $\textit{S}$  的边界曲线\textit{L}在\textit{Oxy}面上的投影，不妨设 $\textit{S}$  取上侧，则曲线 $ L^+ $ 的定向如图，而 $\textit{C}$ 的指向是逆时针的方向

$$	\oint_{L^+}P(x,y,z)\mathrm{d}x=\oint_{C^+}P(x,y,f(x,y))\mathrm{d}x$$

左侧空间曲线积分，右侧为平面曲线积分，我们利用格林公式可得

$$
\begin{align*}
\oint_{L^+}P&(x,y,z)\mathrm{d}x=\oint_{C^+}P(x,y,f(x,y))\mathrm{d}x\\
=&\iint\limits_{D}[-\frac{\partial}{\partial y}P(x,y,f(x,y))]\mathrm{d}x\mathrm{d}y=-\iint\limits_{D}[\frac{\partial P}{\partial y}+\frac{\partial P}{\partial z}f_{y}]\mathrm{d}x\mathrm{d}y
\end{align*}
$$

我们由第二类曲线积分可以得到

$$
\begin{align*}
\iint\limits_{S^+}\frac{\partial P}{\partial z}\mathrm{d}z\mathrm{d}x-\frac{\partial P}{\partial y}\mathrm{d}x\mathrm{d}y&=
\iint\limits_{D}[\frac{\partial P}{\partial z}(-f_{y})+(-\frac{\partial P}{\partial y})\mathrm{d}x\mathrm{d}y\\
&=-\iint\limits_{D}[\frac{\partial P}{\partial y}+\frac{\partial P}{\partial z}f_{y}]\mathrm{d}x\mathrm{d}y
\end{align*}
$$

由此可证斯托克斯公式。

我们用行列式的形式表示，一般我建议记行列式的形式。

$$
\begin{align}
\oint_{L^+}P&\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z=\iint\limits_{S^+}
\begin{vmatrix}
\mathrm{d}y\mathrm{d}z&\mathrm{d}z\mathrm{d}x&\mathrm{d}x\mathrm{d}y\\
\dfrac{\partial}{\partial x}&\dfrac{\partial}{\partial y}&\dfrac{\partial}{\partial z}\\
P&Q&R\\
\end{vmatrix}
\end{align}
$$

我们记 $ \textbf{\textit{F}}=(P,Q,R) $ 称为向量场 $\textbf{\textit{F}}$ 的旋度，并定义

$$
rot\textbf{\textit{F}}=\{\frac{\partial R}{\partial y}-\frac{\partial Q}{\partial z},\frac{\partial P}{\partial z}-\frac{\partial R}{\partial x},\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}\}
$$

那么斯托克斯公式我们可以写成

$$
\oint_{L^+}P\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z=\iint\limits_{S^+}rot\textbf{\textit{F}}\cdot \mathrm{d}\textbf{ \textit{S} }
$$

$$
\begin{align*}
rot\textbf{\textit{F}}=
\begin{vmatrix}
\textbf{\textit{i}}&\textbf{\textit{j}}&\textbf{\textit{k}}\\
\dfrac{\partial}{\partial x}&\dfrac{\partial}{\partial y}&\dfrac{\partial}{\partial z}\\
P&Q&R\\
\end{vmatrix}
\end{align*}
$$

已知 $ S^+ $ 指定一侧的法向量的方向余弦为 $ (\cos\alpha,\cos\beta,\cos\gamma) $ ，那么 $ \mathrm{d}\textbf{\textit{S}}=(\cos\alpha,\cos\beta,\cos\gamma)\mathrm{d}S $ 
我们可以把带行列式的斯托克斯公式改写为
$$
\begin{align}
\oint_{L^+}P&\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z=\iint\limits_{S^+}
\begin{vmatrix}
\cos\alpha&\cos\beta&\cos\gamma\\
\dfrac{\partial}{\partial x}&\dfrac{\partial}{\partial y}&\dfrac{\partial}{\partial z}\\
P&Q&R\\
\end{vmatrix}\mathrm{d}S
\end{align}
$$


最后指出斯托克斯公式的一个特殊情况，当曲线\textit{L}刚好是\textit{Oxy}平面的一条平面曲线，\textit{L}所围成的曲面 $\textit{S}$ 恰好是\textit{Oxy}平面上的一个区域时，\textit{L}的切向量的第三个分量 $ \mathrm{d}z=0 $ ， $ \mathrm{d}S=0 $ 在\textit{Oyz}平面及\textit{Ozx}平面上的有向投影 $ \mathrm{d}y\mathrm{d}z=\mathrm{d}z\mathrm{d}x=0 $ ，此时斯托克斯公式可以简化为

$$
\oint_{L^+}P\mathrm{d}x+Q\mathrm{d}y=\iint\limits_{D}\frac{\partial Q}{\partial x}-\frac{\partial P}{\partial y}
$$

上式即为格林公式，所以格林公式可以看作斯托克斯公式的一个特例。

与平面曲线积分与路径积分无关一样，只要我们斯托克斯公式化出来最后的公式结果为0，我们能够得到空间曲线积分与路径无关，这就是说，凡是斯托克斯公式化出的曲面积分具有形状无关性。

# 场论

物理学里面我们有电场、引力场、温度场等等，但是如果我们忽略物理意义从数学上看，所谓场无外乎是一个标量或向量在空间中的分布。

如果是说标量场的话，在三维空间某区域 $ \Omega $ 中每一点 $ M(x,y,z) $ 都有一个唯一确定的量，数量场为：

$$
u=f(M)\equiv f(x,y,z)
$$

对向量场的话，我们有

$$
\textit{\textbf{u}}=\textit{\textbf{F}}(M)\equiv P(M)\textit{\textbf{i}}+Q(M)\textit{\textbf{j}}+R(M)\textit{\textbf{k}}
$$


物理的场一般为依赖于时间的不稳定场，而数学里更多的是不依赖于时间的稳定场。

## 梯度
在研究场论，我们最先能想到的是等值面和梯度的概念，

设一数量场 $ u=f(x,y,z) $ ，对于任意常数 $\textit{C}$ ，所有使\textit{f}的函数值为 $\textit{C}$ 的点的集合，也即

$$
M_{C}=\{(x,y,z)|f(x,y,z)=C\}
$$

在大多数情况下 $ M_{C} $ 是一个曲面，对于平面数量场 $ u=f(x,y) $ 我们有

$$
M_{C}=\{(x,y,z)|f(x,y,z)=C\}
$$

对于此时的 $ M_{C} $ 变为了一条曲线而不是曲面，对于二维平面我们因此得到了等值线的概念。


对于数量场我们引出了梯度这个向量的概念

$$
\mathrm{grad}f=\{\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z}\}
$$

我们对每一个数量场\textit{f}都存在一个向量场 $ \mathrm{grad}f $ 

对于 $ M_{C} $ 上的每一点 $ (x_{0},y_{0},z_{0}) $ ，我们都能得到一个法向量，因此该点的梯度方向与法线方向相同，都垂直于该点处的切线。

$$
\mathrm{grad}f\bigg|_{\substack{(x_0,y_0,z_0)}}=\{\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z}\}\bigg|_{\substack{(x_0,y_0,z_0)}}
$$

同理，在二维的平面数量场 $ u=f(x,y) $ 的梯度是相应的等值线的法向量。
记作 $ \nabla u=\mathrm{grad}u $ 

补充它的运算法则

$$
\begin{align*}
\nabla& C=0\\
\nabla&(u\pm v)=\nabla u\pm \nabla v\\
\nabla&(uv)=u\nabla v+ v\nabla u\\
\nabla&(\dfrac{u}{v})=\dfrac{1}{u^2}(v\nabla u-u\nabla v)\\
\nabla&\phi(u)=\phi	'(u)\nabla u\\
\nabla&\psi(u,v)=\psi'_{u}\nabla u+\psi'_{v}\nabla v
\end{align*}
$$

有时我们把梯度运算写成向量形式

$$\nabla u=\frac{\partial u}{\partial x}\textit{\textbf{i}}+\frac{\partial u}{\partial y}\textit{\textbf{j}}+\frac{\partial u}{\partial z}\textit{\textbf{k}}\qquad\mbox{或}\qquad\nabla=\frac{\partial}{\partial x}\textit{\textbf{i}}+\frac{\partial}{\partial y}\textit{\textbf{j}}+\frac{\partial}{\partial z}\textit{\textbf{k}}$$


在物理学中，我们定义了电场线和磁场线，我们在数学中定义，如果在向量场\textbf{\textit{F}}中，若曲线 $ \Gamma $ 上每一点\textit{M}处的切线都与向量场\textit{\textbf{F}}在\textit{M}点的向量 $ \textbf{\textit{F}}\bigg|_{\substack{M}} $ 共线，则 $ \Gamma $ 被称为向量线。

对于数量场 $\textit{u}$ 来说，它的梯度 $ \mathrm{grad}u $ 所形成的向量场的向量线与它穿越的 $\textit{u}$ 的等值面垂直。

## 通量和散度
设 $ \textbf{ \textit{u} }=\textbf{\textit{F}}(M) $ 是给定的一个向量场，假设 $\textit{S}$ 是一个双侧曲面，并取定一侧的法向量为\textbf{ $ \textit{n} $ }，则 $ \textbf{\textit{F}}(M) $ 在 $\textit{S}$ 上按指定一侧的第二类曲面积分为

$$
\iint\limits_{S}\textbf{\textit{F}}\cdot \textbf{ $ \textit{n} $ } \mathrm{d}S
$$

的值称为向量场 $ \textbf{\textit{F}} $ 通过曲面 $\textit{S}$ 在指定一侧的通量

 $ \textbf{\textit{F}} $ 是流量场时，积分的值恰好时单位时间内流过 $\textit{S}$ 的流量的代数和，如果 $\textit{S}$ 是一个闭曲面，法向量取外法向量时，通量就是曲面上整体的流出量和流入量之差，当通量大于0时，流出的量多于流入的量。

介绍了通量之后，我们介绍散度的概念。

设 $ M_{0}(x_{0},y_{0},z_{0}) $ 是向量场 $ \textit{\textbf{F}}=(P,Q,R) $ 中的一点，\textit{V}是包含 $ M_{0} $ 的一个区域，其边界 $\textit{S}$ 是光滑曲面，在 $\textit{S}$ 上取定单位外法向量\textit{\textbf{n}}，我们由高斯定理可得

$$
\oiint\limits_{S}\textbf{\textit{F}}\cdot \textit{\textbf{n}}\mathrm{d}S=
\iiint\limits_{V}(\frac{\partial P}{\partial x}+\frac{\partial Q}{\partial y}+\frac{\partial R}{\partial z})\mathrm{d}v
$$

或写成

$$
\oiint\limits_{S}\textbf{\textit{F}}\cdot \textit{\textbf{n}}\mathrm{d}S=
\iiint\limits_{V}\mathrm{div}\textbf{\textit{F}}\mathrm{d}v
$$

由积分中值定理我们可以得到

$$
\iiint\limits_{V}\mathrm{d}{div}\textbf{\textit{F}}\mathrm{d}v=
\mathrm{div}\textbf{\textit{F}}\bigg|_{\substack{(\bar{x},\bar{y},\bar{z})}}\cdot m(V)
$$

其中 $ m(V) $ 表示的\textit{V}的体积，这样当积分区域V缩小到一点 $ M_{0}(x_{0},y_{0},z_{0}) $ 时，通量的平均值的极限即是 $ \mathrm{d}{div}\textbf{\textit{F}} $ 在 $ M_{0} $ 的值

$$
\mathrm{div}\textbf{\textit{F}}\bigg|_{\substack{(M_{0})}}=\lim\limits_{V\rightarrow M_{0}}\dfrac{\oiint\limits_{S}\textbf{\textit{F}}\cdot \textit{\textbf{n}}\mathrm{d}S}{m(V)}
$$

由此可见，散度在一点的值在一定意义上可以看作是在该点附近单位体积内的通量，若散度在一点大于零，表明该点附近流向该点的量少于自该点附近流出的量，我们把该点称之为“源”。若散度在一点处小于零，则表面在该点附近流向该点的量多余自该点流出的量，我们把该点称之为“漏”。散度为零的点既非“源”也非“漏”。

若向量场\textbf{\textit{F}}使得散度 $ \mathrm{div}(M)\equiv0 $ 则成向量场\textbf{\textit{F}}为无源场，也称为管形场。

若\textbf{\textit{F}}为无源场，则通过该场中任何一个闭曲面沿外法向量的通量为零，在一个无源无漏的场中流入一个闭曲面的量等于流出这个闭曲面的量，我们可以想象一个宽度不均匀的水管，单位时间在不同大小截面流过的水的体积是相等的，由于截面积 $\textit{S}$ 的大小不一样，差异主要是流速大小，但是我们研究不同截面的通量是相等的。

$$\nabla=\frac{\partial}{\partial x}\textit{\textbf{i}}+\frac{\partial}{\partial y}\textit{\textbf{j}}+\frac{\partial}{\partial z}\textit{\textbf{k}}$$

我们将向量场 $ \textbf{\textit{F}}=P\textit{\textbf{i}}+Q\textit{\textbf{j}}+R\textit{\textbf{k}} $ 的散度

$$\mathrm{div}\textbf{\textit{F}}=\dfrac{\partial P}{\partial x}+\dfrac{\partial Q}{\partial y}+\dfrac{\partial R}{\partial z}$$

我们写成

$$\mathrm{div}\textbf{\textit{F}}=\nabla \cdot \textbf{\textit{F}}$$

## 环量和旋度

假设 $ \textbf{\textit{F}}=P\textit{\textbf{i}}+Q\textit{\textbf{j}}+R\textit{\textbf{k}} $ 是一个向量场，而L是向量场中给定的一条有定向的闭曲线，我们称曲线积分

$$
I=	\oint_{L^+}P\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z
$$ 

为向量场F沿沿L的环量，积分I可以写成

$$\oint_{L}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{\textit{r}}$$

其中 $ \mathrm{d}\textbf{\textit{r}}=(\mathrm{d}x,\mathrm{d}y,\mathrm{d}z) $ 
当\textit{\textbf{F}}是一个静力场时，其环量\textit{I}代表\textit{\textbf{F}}沿曲线作用一周时所做的功，当\textit{\textbf{F}}是一个流速场时， $ \textit{\textbf{F}}\cdot \mathrm{d}\textbf{\textit{r}} $ 则是曲线\textit{L}上一点处的流速在\textit{L}切线方向的投影乘以相应的弧微分。因此在流速场中沿一条有向闭曲线之环量是流速沿曲线切线方向投影的某种代数和，它的物理意义在于标明这个闭曲线整体是否旋转。当沿着曲线\textit{L}流速场有旋转时，则沿\textit{L}的环量不等于0.

为了研究向量场每一点的旋转情况，我们需要引进环量密度这个概念。在向量场\textit{\textbf{F}}中任意一点\textit{M}，在\textit{M}处任意取定一个单位向量\textit{\textbf{n}}，过点\textit{M}任作一小曲面 $\textit{S}$ ，并设\textit{L}为曲面 $\textit{S}$ 的正向边界，与 $ \textit{n} $ 组成右手系，当曲面 $\textit{S}$ 收缩成一点\textit{M}时，即当S的直径 $ \lambda(S)\rightarrow 0 $ 时，若极限

$$
\dfrac{\lim\limits_{\lambda(S)\rightarrow 0}\oint_{L}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{\textit{r}}}{m(S)}
$$

存在，则该极限值为向量场\textit{\textbf{F}}在\textit{M}点绕方向\textit{ $ \textit{n} $ }的环量面密度，或称为方向旋量。

$$
\dfrac{\lim\limits_{\lambda(S)\rightarrow 0}\oint_{L}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{\textit{r}}}{m(S)}
=\begin{vmatrix}
\cos\alpha&\cos\beta&\cos\gamma\\
\dfrac{\partial}{\partial x}&\dfrac{\partial}{\partial y}&\dfrac{\partial}{\partial z}\\
P&Q&R\\
\end{vmatrix}\cdot \textbf{ $ \textit{n} $ }
$$

我们称向量

$$
=\begin{vmatrix}
\cos\alpha&\cos\beta&\cos\gamma\\
\dfrac{\partial}{\partial x}&\dfrac{\partial}{\partial y}&\dfrac{\partial}{\partial z}\\
P&Q&R\\
\end{vmatrix}
$$

为向量场\textbf{\textit{F}}在一点M处的旋度，记为 $ \mathrm{rot}\textbf{\textit{F}} $ ，那么\textbf{\textit{F}}在点M处沿任一方向n的方向旋量为

$$
\mathrm{rot}\textbf{\textit{F}}\cdot \textbf{ $ \textit{n} $ }=\mid \mathrm{rot}\textbf{\textit{F}}\mid \cos<\textbf{ $ \textit{n} $ },\mathrm{rot}\textbf{\textit{F}}>
$$

也就是说沿n的方向旋量恰好等于旋度 $ \mathrm{rot}\textbf{\textit{F}} $ 在n上的投影，方向旋量沿旋度的方向达到最大值，也就是旋度达到方向是方向旋量最大的方向。

## 保守场
保守场的概念其实应该是最容易理解的，比较物理里面都学过重力场，都明白保守力做功与路径无关的这个道理。

把保守场放在最后讲其实是想用我们前面引入的各种量来描述保守场，试着去分析。

设 $ \textbf{\textit{F}}=P\textit{\textbf{i}}+Q\textit{\textbf{j}}+R\textit{\textbf{k}} $ 是定义在区域 $ D\subset R^3 $ 中的一个向量场，若沿 $\textit{D}$ 中的任意一条曲线 $ \wideparen{AB} $ 的积分

$$
\int_{\wideparen{AB}}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{\textit{r}}=\int_{\wideparen{AB}}P\mathrm{d}x+Q\mathrm{d}y+R\mathrm{d}z
$$

只与曲线的起点\textit{A}和终点 $\textit{B}$ 有关，而与曲线 $ \wideparen{AB} $ 的路径无关，则称向量场\textbf{\textit{F}}在 $\textit{D}$ 内是一个保守场。

设D是一个线性单连通区域，而 $ \textbf{\textit{F}}=P\textit{\textbf{i}}+Q\textit{\textbf{j}}+R\textit{\textbf{k}} $ 是定义在区域 $ D $ 中的一个向量场，其中P,Q,R在D内有一阶连续偏导数，那么下列三个条件是等价的


- $ \textbf{\textit{F}} $  在D内是保守场\\
- $ \textbf{\textit{F}} $  在D内沿任意闭曲线 $ \Gamma $ 的环量为零，即 $ \int_{\wideparen{AB}}\textbf{\textit{F}}\cdot \mathrm{d}\textbf{\textit{r}}=0 $ \\
- $ \textbf{\textit{F}} $  是无旋场，即 $ \mathrm{rot}\textbf{\textit{F}}=0 $ 


与保守场相关的是有势场，如果对于向量场\textbf{\textit{F}}，存在一个函数\textit{f}使得其负梯度恰好是\textbf{\textit{F}}，也即

$$
\textbf{\textit{F}}=-\mathrm{grad}f
$$


